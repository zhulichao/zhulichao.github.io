<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="前端学习之路" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="前端学习之路">
<meta property="og:type" content="website">
<meta property="og:title" content="前端学习之路">
<meta property="og:url" content="https://zhulichao.github.io/page/16/index.html">
<meta property="og:site_name" content="前端学习之路">
<meta property="og:description" content="前端学习之路">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="前端学习之路">
<meta name="twitter:description" content="前端学习之路">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: undefined,
      author: '博主'
    }
  };
</script>

  <title> 前端学习之路 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?41d77ee7657d4e19a7f8a6361fe2121f";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">前端学习之路</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      

  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>

    </div>
  
</nav>

 </div>
      
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/me.png"
               alt="小朱" />
          <p class="site-author-name" itemprop="name">小朱</p>
          <p class="site-description motion-element" itemprop="description">前端学习之路</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">168</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">37</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">37</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/zhulichao" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              友情链接
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.jikexueyuan.com/" title="极客学院" target="_blank">极客学院</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://caniuse.com" title="caniuse" target="_blank">caniuse</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://codepen.io" title="codepen" target="_blank">codepen</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://jsbin.com/?html,css,output" title="JS Bin" target="_blank">JS Bin</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://babeljs.io/repl/" title="Babel在线编译" target="_blank">Babel在线编译</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://www.iconfinder.com/iconsets/miu" title="Iconfinder图标" target="_blank">Iconfinder图标</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://www.bejson.com/" title="在线JSON格式化" target="_blank">在线JSON格式化</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://img.top/" title="智能图像压缩" target="_blank">智能图像压缩</a>
                </li>
              
            </ul>
          </div>
        

      </section>

      

    </div>
  </aside>


        
    </header>
 
    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/29/react-router-base/" itemprop="url">
                  React Router-基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-29T13:13:11+08:00" content="2016-10-29">
              2016-10-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React-Router/" itemprop="url" rel="index">
                    <span itemprop="name">React Router</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="React-Router"><a href="#React-Router" class="headerlink" title="React Router"></a>React Router</h2><p>参考：<br><a href="http://www.ruanyifeng.com/blog/2016/05/react_router.html" target="_blank" rel="external">React Router 使用教程</a><br><a href="https://github.com/reactjs/react-router-tutorial/tree/master/lessons" target="_blank" rel="external">react-router-tutorial</a><br><a href="https://github.com/ReactTraining/react-router" target="_blank" rel="external">react-router</a>  </p>
<h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>React-Router 路由库，是官方维护的路由库，事实上也是唯一可选的路由库。它通过管理 URL，实现组件的切换和状态的变化，开发复杂的应用几乎肯定会用到。</p>
<p>一般在src/index.jsx中定义路由，进行整个工程路由的管理。路由匹配规则是从上到下执行，一旦发现匹配，就不再走其余的规则了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">import &#123; Router, Route, hashHistory &#125; from &apos;react-router&apos;;</div><div class="line"></div><div class="line">render((</div><div class="line">    &lt;Router history=&#123;hashHistory&#125;&gt;</div><div class="line">        &lt;Route path=&quot;/&quot; component=&#123;App&#125;&gt;</div><div class="line">            &lt;Route path=&quot;/home&quot; component=&#123;CommonMainPage&#125; /&gt;</div><div class="line">        &lt;/Route&gt;</div><div class="line">    &lt;/Router&gt;</div><div class="line">), document.getElementById(&apos;app&apos;));</div></pre></td></tr></table></figure></p>
<p>子路由也可以不写在Router组件里面，单独传入Router组件的routes属性。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">let routes = &lt;Route path=&quot;/&quot; component=&#123;App&#125;&gt;</div><div class="line">    &lt;Route path=&quot;/home&quot; component=&#123;CommonMainPage&#125; /&gt;</div><div class="line">&lt;/Route&gt;;</div><div class="line">&lt;Router routes=&#123;routes&#125; history=&#123;browserHistory&#125;/&gt;</div></pre></td></tr></table></figure></p>
<p>用户访问/home时，会先加载App组件，然后在它的内部再加载CommonMainPage组件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;App&gt;</div><div class="line">    &lt;Repos/&gt;</div><div class="line">&lt;/App&gt;</div></pre></td></tr></table></figure></p>
<p>App组件要写成下面的样子<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">export default React.createClass(&#123;</div><div class="line">  render() &#123;</div><div class="line">    return &lt;div&gt;</div><div class="line">      &#123;this.props.children&#125;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<h2 id="path属性"><a href="#path属性" class="headerlink" title="path属性"></a>path属性</h2><p>Route组件的path属性指定路由的匹配规则。这个属性是可以省略的，这样的话，不管路径是否匹配，总是会加载指定组件。path属性也可以使用相对路径（不以/开头），匹配时就会相对于父组件的路径。嵌套路由如果想摆脱这个规则，可以使用绝对路由。</p>
<p>path可以使用通配符，如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/list/:servId&quot; component=&#123;ListPage&#125; /&gt;</div></pre></td></tr></table></figure></p>
<p>在ListPage组件中通过<code>this.props.params.servId</code>可获取该变量对于在url中的值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/hello/:name&quot;&gt;</div><div class="line">// 匹配 /hello/michael</div><div class="line">// 匹配 /hello/ryan</div><div class="line"></div><div class="line">&lt;Route path=&quot;/hello(/:name)&quot;&gt;</div><div class="line">// 匹配 /hello</div><div class="line">// 匹配 /hello/michael</div><div class="line">// 匹配 /hello/ryan</div><div class="line"></div><div class="line">&lt;Route path=&quot;/files/*.*&quot;&gt;</div><div class="line">// 匹配 /files/hello.jpg</div><div class="line">// 匹配 /files/hello.html</div><div class="line"></div><div class="line">&lt;Route path=&quot;/files/*&quot;&gt;</div><div class="line">// 匹配 /files/ </div><div class="line">// 匹配 /files/a</div><div class="line">// 匹配 /files/a/b</div><div class="line"></div><div class="line">&lt;Route path=&quot;/**/*.jpg&quot;&gt;</div><div class="line">// 匹配 /files/hello.jpg</div><div class="line">// 匹配 /files/path/to/file.jpg</div></pre></td></tr></table></figure>
<h3 id="IndexRoute"><a href="#IndexRoute" class="headerlink" title="IndexRoute"></a>IndexRoute</h3><p>IndexRoute显式指定根路由的子组件，注意没有路径参数path，即指定默认情况下加载的子组件，如访问路径/，会加载该组件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;Router&gt;</div><div class="line">  &lt;Route path=&quot;/&quot; component=&#123;App&#125;&gt;</div><div class="line">    &lt;IndexRoute component=&#123;Home&#125;/&gt;</div><div class="line">    &lt;Route path=&quot;accounts&quot; component=&#123;Accounts&#125;/&gt;</div><div class="line">&lt;/Router&gt;</div></pre></td></tr></table></figure></p>
<h3 id="Redirect"><a href="#Redirect" class="headerlink" title="Redirect"></a>Redirect</h3><p>Redirect组件用于路由的跳转，即用户访问一个路由，会自动跳转到另一个路由。<br><code>＜Redirect from=&quot;/messages/:id&quot; to=&quot;/infos/:id&quot; /&gt;</code></p>
<h3 id="IndexRedirect"><a href="#IndexRedirect" class="headerlink" title="IndexRedirect"></a>IndexRedirect</h3><p>IndexRedirect组件用于访问根路由的时候，将用户重定向到某个子组件。<br><code>＜IndexRedirect to=&quot;/welcome&quot; /&gt;</code><br>用户访问根路径时，将自动重定向到子组件welcome。</p>
<h3 id="Link"><a href="#Link" class="headerlink" title="Link"></a>Link</h3><p>Link组件用于取代<code>&lt;a&gt;</code>元素，生成一个链接，允许用户点击后跳转到另一个路由。它基本上就是<code>&lt;a&gt;</code>元素的React 版本，可以接收Router的状态。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// 点击About会跳转到/about路由</div><div class="line">&lt;Link to=&quot;/about&quot;&gt;About&lt;/Link&gt;</div><div class="line"></div><div class="line">// 点击About跳转到/about是文字显示为红色</div><div class="line">&lt;Link to=&quot;/about&quot; activeStyle=&#123;&#123;color: &apos;red&apos;&#125;&#125;&gt;About&lt;/Link&gt;</div><div class="line"></div><div class="line">// 也可以指定class </div><div class="line">&lt;Link to=&quot;/about&quot; activeClassName=&quot;active&quot;&gt;About&lt;/Link&gt;</div></pre></td></tr></table></figure>
<p>在Router组件之外，导航到路由页面，可以使用浏览器的History API。这种方式，对于以前没有访问过的路由是不好使的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">import &#123; browserHistory &#125; from &apos;react-router&apos;;</div><div class="line">browserHistory.push(&apos;/some/path&apos;);</div></pre></td></tr></table></figure></p>
<p>或者使用context对象。注意，pathname和state名称是固定的，跳转到pathname时会带着state的信息。在跳转进入的组件中，使用<code>this.props.location.state</code>获取这个state信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// 路由跳转</div><div class="line">this.context.router.push(&#123;</div><div class="line">    pathname: &apos;/card/&apos; + this.props.servDef.SERV_ID,</div><div class="line">    state: this.props.listQueryData</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<h3 id="IndexLink"><a href="#IndexLink" class="headerlink" title="IndexLink"></a>IndexLink</h3><p>如果链接到根路由/，不要使用Link组件，而要使用IndexLink组件。这是因为对于根路由来说，activeStyle和activeClassName总是生效，因为’/‘会匹配任何子路由，而IndexLink组件会使用路径的精确匹配。<br><code>&lt;IndexLink to=&quot;/&quot; activeClassName=&quot;active&quot;&gt;</code><br>或者使用<br><code>&lt;Link to=&quot;/&quot; activeClassName=&quot;active&quot; onlyActiveOnIndex={true}&gt;Home&lt;/Link&gt;</code></p>
<h3 id="histroy"><a href="#histroy" class="headerlink" title="histroy"></a>histroy</h3><p>Router组件的history属性，是用来监听浏览器地址栏变化的，并将URL解析成一个地址对象，供 React Router 匹配。history属性，一共可以设置三种值。  </p>
<ul>
<li><p><strong>createMemoryHistory：</strong>主要用于服务器渲染，它创建一个内存中的history对象，不与浏览器URL互动，<code>const history = createMemoryHistory(location)</code></p>
</li>
<li><p><strong>hashHistory：</strong>路由将通过URL的hash部分#切换，类似example.com/#/some/path</p>
</li>
<li><p><strong>browserHistory：</strong>不再通过Hash完成，而显示正常的路径example.com/some/path，背后调用的是浏览器的History API。这种情况需要对<a href="https://github.com/ReactTraining/react-router/blob/master/docs/guides/Histories.md#configuring-your-server" target="_blank" rel="external">服务器改造</a>，否则用户直接向服务器请求某个子路由，会显示网页找不到的404错误。<br>如果开发服务器使用的是webpack-dev-server，加上–history-api-fallback参数<br><code>webpack-dev-server --inline --content-base . --history-api-fallback</code>，index.html中用绝对路径引入编译后的文件<code>&lt;script src=&quot;/bundle.js&quot;&gt;&lt;/script&gt;</code></p>
</li>
</ul>
<h3 id="路由的钩子"><a href="#路由的钩子" class="headerlink" title="路由的钩子"></a>路由的钩子</h3><p>每个路由都有Enter和Leave钩子，用户进入或离开该路由时触发。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;about&quot; component=&#123;About&#125; /&gt;  </div><div class="line">＜Route path=&quot;inbox&quot; component=&#123;Inbox&#125;&gt;  </div><div class="line">    ＜Redirect from=&quot;messages/:id&quot; to=&quot;/messages/:id&quot; /&gt;</div><div class="line">&lt;/Route&gt;</div></pre></td></tr></table></figure></p>
<p>如果用户离开/messages/:id，进入/about时，会依次触发以下的钩子:  </p>
<blockquote>
<p>/messages/:id的onLeave<br>/inbox的onLeave<br>/about的onEnter  </p>
</blockquote>
<p>进行路由跳转<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;Route</div><div class="line">    path=&quot;messages/:id&quot;</div><div class="line">    onEnter=&#123;(&#123;params&#125;, replace) =&gt; replace(`/messages/$&#123;params.id&#125;`)&#125; </div><div class="line">/&gt;</div></pre></td></tr></table></figure></p>
<p>进行登录验证<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;Route path=&quot;/home&quot; component=&#123;CommonMainPage&#125; onEnter=&#123;requireAuth&#125;&gt;</div><div class="line"></div><div class="line">function requireAuth(nextState, replace) &#123;</div><div class="line">    if (!storage.get(&apos;token&apos;)) &#123;</div><div class="line">        replace(&#123;</div><div class="line">            pathname: &apos;/login&apos;,</div><div class="line">            state: &#123; nextPathname: nextState.location.pathname &#125;</div><div class="line">        &#125;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>当用户离开一个路径的时候，跳出一个提示框，要求用户确认是否离开。setRouteLeaveHook方法为Leave钩子指定routerWillLeave函数，该方法如果返回false，将阻止路由的切换，否则就返回一个字符串，提示用户决定是否要切换。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">const Home = withRouter(</div><div class="line">  React.createClass(&#123;</div><div class="line">    componentDidMount() &#123;</div><div class="line">      this.props.router.setRouteLeaveHook(</div><div class="line">        this.props.route, </div><div class="line">        this.routerWillLeave</div><div class="line">      )</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    routerWillLeave(nextLocation) &#123;</div><div class="line">      // 返回 false 会继续停留当前页面，</div><div class="line">      // 否则，返回一个字符串，会显示给用户，让其自己决定</div><div class="line">      if (!this.state.isSaved)</div><div class="line">        return &apos;确认要离开？&apos;;</div><div class="line">    &#125;,</div><div class="line">  &#125;)</div><div class="line">)</div></pre></td></tr></table></figure></p>
<h3 id="生产环境相关"><a href="#生产环境相关" class="headerlink" title="生产环境相关"></a>生产环境相关</h3><p><strong>if-env 依赖：</strong> 如果想简化开发、在任何情况运行npm start都执行正确的脚本启动，可以安装if-env依赖<code>npm install if-env --save</code>并在package.json中这样部署，再运行<code>NODE_ENV=production npm start</code>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;start&quot;: &quot;if-env NODE_ENV=production &amp;&amp; npm run start:prod || npm start:dev&quot;,</div><div class="line">  &quot;start:dev&quot;: &quot;webpack&quot;,</div><div class="line">  &quot;start:prod&quot;: &quot;start-cluster&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>为了限制浏览器可访问的文件，通常创建一个浏览器可访问的文件夹，如public，将index.html、index.css放入该目录，并在server.js中指定可访问的静态资源路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">app.use(express.static(path.join(__dirname, &apos;public&apos;)))</div><div class="line">app.get(&apos;*&apos;, function (req, res) &#123;</div><div class="line">  res.sendFile(path.join(__dirname, &apos;public&apos;, &apos;index.html&apos;))</div><div class="line">&#125;)</div></pre></td></tr></table></figure></p>
<p>并指定webpack输入目录也为该目录<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">output: &#123;</div><div class="line">  path: &apos;public&apos;,</div><div class="line">  // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最后启动命令添加参数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&quot;start:dev&quot;: &quot;webpack-dev-server --inline --content-base public --history-api-fallback&quot;,</div></pre></td></tr></table></figure></p>
<p><strong>compression 依赖:</strong> 用该中间件压缩和处理静态内容。开启gzip压缩对Web应用会产生巨大影响，当一个gzip压缩浏览器请求某些资源的时候，服务器会在响应返回给浏览器之前进行压缩。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var app = express();</div><div class="line">// 必须放在第一行</div><div class="line">app.use(compression());</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p><strong>服务器端渲染:</strong> </p>
<p>需要一个服务器渲染的webpack配置<code>webpack.server.config.js</code>，原来的webpack配置webpack.config.js还是保留的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">var fs = require(&apos;fs&apos;);</div><div class="line">var path = require(&apos;path&apos;);</div><div class="line">module.exports = &#123;</div><div class="line">  entry: path.resolve(__dirname, &apos;server.js&apos;),</div><div class="line">  output: &#123;</div><div class="line">    filename: &apos;server.bundle.js&apos;</div><div class="line">  &#125;,</div><div class="line">  target: &apos;node&apos;,</div><div class="line">  // keep node_module paths out of the bundle</div><div class="line">  externals: fs.readdirSync(path.resolve(__dirname, &apos;node_modules&apos;)).concat([</div><div class="line">    &apos;react-dom/server&apos;, &apos;react/addons&apos;,</div><div class="line">  ]).reduce(function (ext, mod) &#123;</div><div class="line">    ext[mod] = &apos;commonjs &apos; + mod</div><div class="line">    return ext</div><div class="line">  &#125;, &#123;&#125;),</div><div class="line">  node: &#123;</div><div class="line">    __filename: true,</div><div class="line">    __dirname: true</div><div class="line">  &#125;,</div><div class="line">  module: &#123;</div><div class="line">    loaders: [</div><div class="line">      &#123; test: /\.js$/, exclude: /node_modules/, loader: &apos;babel-loader?presets[]=es2015&amp;presets[]=react&apos; &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>更新<code>package.json</code>文件，用<code>NODE_ENV=production npm start</code>启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;start&quot;: &quot;if-env NODE_ENV=production &amp;&amp; npm run start:prod || npm run start:dev&quot;,</div><div class="line">  &quot;start:dev&quot;: &quot;webpack-dev-server --inline --content-base public/ --history-api-fallback&quot;,</div><div class="line">  &quot;start:prod&quot;: &quot;npm run build &amp;&amp; node server.bundle.js&quot;,</div><div class="line">  &quot;build:client&quot;: &quot;webpack&quot;,</div><div class="line">  &quot;build:server&quot;: &quot;webpack --config webpack.server.config.js&quot;,</div><div class="line">  &quot;build&quot;: &quot;npm run build:client &amp;&amp; npm run build:server&quot;</div><div class="line">&#125;,</div></pre></td></tr></table></figure></p>
<p>把路由管理放到单独的文件中，以便客户端和服务器端都能获取它。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// modules/routes.js</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123; Route, IndexRoute &#125; <span class="keyword">from</span> <span class="string">'react-router'</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></div><div class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">'./About'</span></div><div class="line"><span class="keyword">import</span> Repos <span class="keyword">from</span> <span class="string">'./Repos'</span></div><div class="line"><span class="keyword">import</span> Repo <span class="keyword">from</span> <span class="string">'./Repo'</span></div><div class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">'./Home'</span></div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = (</div><div class="line">  &lt;Route path="/" component=&#123;App&#125;&gt;</div><div class="line">    &lt;IndexRoute component=&#123;Home&#125; /&gt;</div><div class="line">    &lt;Route path="/repos" component=&#123;Repos&#125;&gt;</div><div class="line">      &lt;Route path="/repos/:userName/:repoName" component=&#123;Repo&#125; /&gt;</div><div class="line">    &lt;/Route&gt;</div><div class="line">    &lt;Route path="/about" component=&#123;About&#125; /&gt;</div><div class="line">  &lt;/Route&gt;</div><div class="line">)</div></pre></td></tr></table></figure></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// index.js</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123; render &#125; <span class="keyword">from</span> <span class="string">'react-dom'</span></div><div class="line"><span class="keyword">import</span> &#123; Router, browserHistory &#125; <span class="keyword">from</span> <span class="string">'react-router'</span></div><div class="line"><span class="comment">// import routes and pass them into &lt;Router/&gt;</span></div><div class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">'./modules/routes'</span></div><div class="line"></div><div class="line">render(</div><div class="line">  <span class="xml"><span class="tag">&lt;<span class="name">Router</span> <span class="attr">routes</span>=<span class="string">&#123;routes&#125;</span> <span class="attr">history</span>=<span class="string">&#123;browserHistory&#125;/</span>&gt;</span>,</span></div><div class="line">  document.getElementById('app')</div><div class="line">)</div></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ...</span></div><div class="line"><span class="comment">// import some new stuff</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="comment">// we'll use this to render our app to an html string</span></div><div class="line"><span class="keyword">import</span> &#123; renderToString &#125; <span class="keyword">from</span> <span class="string">'react-dom/server'</span></div><div class="line"><span class="comment">// and these to match the url to routes and then render</span></div><div class="line"><span class="keyword">import</span> &#123; match, RouterContext &#125; <span class="keyword">from</span> <span class="string">'react-router'</span></div><div class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">'./modules/routes'</span></div><div class="line"></div><div class="line"><span class="comment">// ...</span></div><div class="line"></div><div class="line"><span class="comment">// send all requests to index.html so browserHistory works</span></div><div class="line"></div><div class="line">app.get(<span class="string">'*'</span>, (req, res) =&gt; &#123;</div><div class="line">  <span class="comment">// match the routes to the url</span></div><div class="line">  match(&#123; routes: routes, location: req.url &#125;, (err, redirect, props) =&gt; &#123;</div><div class="line">    <span class="comment">// `RouterContext` is the what `Router` renders. `Router` keeps these</span></div><div class="line">    <span class="comment">// `props` in its state as it listens to `browserHistory`. But on the</span></div><div class="line">    <span class="comment">// server our app is stateless, so we need to use `match` to</span></div><div class="line">    <span class="comment">// get these props before rendering.</span></div><div class="line">    <span class="keyword">const</span> appHtml = renderToString(&lt;RouterContext &#123;...props&#125;/&gt;)</div><div class="line"></div><div class="line">    // dump the HTML into a template, lots of ways to do this, but none are</div><div class="line">    // really influenced by React Router, so we're just using a little</div><div class="line">    // function, `renderPage`</div><div class="line">    res.send(renderPage(appHtml))</div><div class="line">  &#125;)</div><div class="line">&#125;)</div><div class="line"></div><div class="line">function renderPage(appHtml) &#123;</div><div class="line">  return `</div><div class="line">    &lt;!doctype html public="storage"&gt;</div><div class="line">    &lt;html&gt;</div><div class="line">    &lt;meta charset=utf-8/&gt;</div><div class="line">    &lt;title&gt;My First React Router App&lt;/title&gt;</div><div class="line">    &lt;link rel=stylesheet href=/index.css&gt;</div><div class="line">    &lt;div id=app&gt;$&#123;appHtml&#125;&lt;/div&gt;</div><div class="line">    &lt;script src="/bundle.js"&gt;&lt;/script&gt;</div><div class="line">   `</div><div class="line">&#125;</div><div class="line"></div><div class="line">var PORT = process.env.PORT || 8080</div><div class="line">app.listen(PORT, function() &#123;</div><div class="line">  console.log('Production Express server running at localhost:' + PORT)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/29/babel-base/" itemprop="url">
                  Babel-入门
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-29T12:13:35+08:00" content="2016-10-29">
              2016-10-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/ES6/" itemprop="url" rel="index">
                    <span itemprop="name">ES6</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://babeljs.io/" target="_blank" rel="external">Babel</a>是一个广泛使用的转码器，可以将ES6代码转为ES5代码，从而在现有环境执行。</p>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>Babel的配置文件是.babelrc，存放在项目的根目录下，该文件用来设置转码规则和插件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;presets&quot;: [], -- 设定转码规则</div><div class="line">    &quot;plugins&quot;: []  -- 设定支持的插件，如&apos;antd&apos;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ES2015转码规则<br><code>npm install --save-dev babel-preset-es2015</code><br>react转码规则<br><code>npm install --save-dev babel-preset-react</code><br>ES7不同阶段语法提案的转码规则（共有4个阶段），选装一个<br><code>npm install --save-dev babel-preset-stage-0</code><br><code>npm install --save-dev babel-preset-stage-1</code><br><code>npm install --save-dev babel-preset-stage-2</code><br><code>npm install --save-dev babel-preset-stage-3</code>  </p>
<h3 id="babel-cli"><a href="#babel-cli" class="headerlink" title="babel-cli"></a>babel-cli</h3><p><code>npm install --global babel-cli</code> 用于命令行转码的工具</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"># 转码结果输出到标准输出</div><div class="line">$ babel example.js</div><div class="line"></div><div class="line"># 转码结果写入一个文件</div><div class="line"># --out-file 或 -o 参数指定输出文件</div><div class="line">$ babel example.js --out-file compiled.js</div><div class="line"># 或者</div><div class="line">$ babel example.js -o compiled.js</div><div class="line"></div><div class="line"># 整个目录转码</div><div class="line"># --out-dir 或 -d 参数指定输出目录</div><div class="line">$ babel src --out-dir lib</div><div class="line"># 或者</div><div class="line">$ babel src -d lib</div><div class="line"></div><div class="line"># -s 参数生成source map文件</div><div class="line">$ babel src -d lib -s</div></pre></td></tr></table></figure>
<p>babel-cli工具自带一个babel-node命令，提供一个支持ES6的REPL环境。它支持Node的REPL环境的所有功能，而且可以直接运行ES6代码。</p>
<h3 id="babel-register"><a href="#babel-register" class="headerlink" title="babel-register"></a>babel-register</h3><p>babel-register模块改写require命令，为它加上一个钩子。此后，每当使用require加载.js、.jsx、.es和.es6后缀名的文件，就会先用Babel进行转码。注意，它只会对require命令加载的文件转码，而不会对当前文件转码。另外，由于它是实时转码，所以只适合在开发环境使用。</p>
<h3 id="babel-core"><a href="#babel-core" class="headerlink" title="babel-core"></a>babel-core</h3><p>如果某些代码需要调用Babel的API进行转码，就要使用babel-core模块，配置对象为<a href="http://babeljs.io/docs/usage/options/" target="_blank" rel="external">options</a>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">var babel = require(&apos;babel-core&apos;);</div><div class="line"></div><div class="line">// 字符串转码</div><div class="line">babel.transform(&apos;code();&apos;, options);</div><div class="line">// =&gt; &#123; code, map, ast &#125;</div><div class="line"></div><div class="line">// 文件转码（异步）</div><div class="line">babel.transformFile(&apos;filename.js&apos;, options, function(err, result) &#123;</div><div class="line">  result; // =&gt; &#123; code, map, ast &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">// 文件转码（同步）</div><div class="line">babel.transformFileSync(&apos;filename.js&apos;, options);</div><div class="line">// =&gt; &#123; code, map, ast &#125;</div><div class="line"></div><div class="line">// Babel AST转码</div><div class="line">babel.transformFromAst(ast, code, options);</div><div class="line">// =&gt; &#123; code, map, ast &#125;</div></pre></td></tr></table></figure></p>
<h3 id="babel-polyfill"><a href="#babel-polyfill" class="headerlink" title="babel-polyfill"></a>babel-polyfill</h3><p>Babel默认只转换新的JavaScript句法（syntax），而不转换新的API，比如Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise等全局对象，以及一些定义在全局对象上的方法（比如Object.assign）都不会转码。如果想让这些代码执行，必须使用babel-polyfill，为当前环境提供一个垫片。</p>
<h3 id="浏览器环境"><a href="#浏览器环境" class="headerlink" title="浏览器环境"></a>浏览器环境</h3><p>Babel也可以用于浏览器环境。可在网页中插入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;node_modules/babel-core/browser.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script type=&quot;text/babel&quot;&gt;</div></pre></td></tr></table></figure></p>
<p>或<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.4.4/babel.min.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script type=&quot;text/babel&quot;&gt;</div></pre></td></tr></table></figure></p>
<p>网页中实时将ES6代码转为ES5，对性能会有影响。生产环境需要加载已经转码完成的脚本。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/22/fetch-ajax/" itemprop="url">
                  Fetch替代Ajax
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-22T21:31:18+08:00" content="2016-10-22">
              2016-10-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Fetch出现原因"><a href="#Fetch出现原因" class="headerlink" title="Fetch出现原因"></a>Fetch出现原因</h2><p><a href="https://segmentfault.com/a/1190000003810652" target="_blank" rel="external">传统 Ajax 已死，Fetch 永生</a>  传统 Ajax 指的是 XMLHttpRequest（XHR）</p>
<p>XMLHttpRequest 是一个设计粗糙的 API，不符合关注分离（Separation of Concerns）的原则，配置和调用方式非常混乱，而且基于事件的异步模型写起来也没有现代的 Promise，generator/yield，async/await 友好。Fetch 的出现就是为了解决 XHR 的问题，它是替代XMLHttpRequest用来发送网络请求的非常新的API。由于目前大多数浏览器原生还不支持它，建议你使用 isomorphic-fetch 库。</p>
<p>使用async/await对fetch的使用进行优化后，写异步代码就像写同步代码一样爽。async/await是非常新的 API，属于 ES7。</p>
<p>Promise，generator/yield，await/async都是现在和未来JS解决异步的标准做法，可以完美搭配使用。另外，Fetch 也很适合做现在流行的同构应用。同构(isomorphic/universal)就是使前后端运行同一套代码的意思，后端一般是指 NodeJS 环境。</p>
<p>Fetch 优点主要有：</p>
<blockquote>
<p>语法简洁，更加语义化<br>基于标准 Promise 实现，支持 async/await<br>同构方便，使用 isomorphic-fetch  </p>
</blockquote>
<h2 id="支持状况及解决方案"><a href="#支持状况及解决方案" class="headerlink" title="支持状况及解决方案"></a>支持状况及解决方案</h2><p>原生支持率并不高，幸运的是，引入下面这些 polyfill 后可以完美支持 IE8+ ：</p>
<blockquote>
<p>由于 IE8 是 ES3，需要引入 ES5 的 polyfill: es5-shim, es5-sham<br>引入 Promise 的 polyfill: es6-promise<br>引入 fetch 探测库：fetch-detector<br>引入 fetch 的 polyfill: fetch-ie8<br>可选：如果你还使用了 jsonp，引入 fetch-jsonp<br>可选：开启 Babel 的 runtime 模式，现在就使用 async/await</p>
</blockquote>
<p>JSONP(JSON with Padding)是JSON的一种”使用模式”，可用于解决主流浏览器的跨域数据访问的问题<br><a href="http://www.cnblogs.com/yuzhongwusan/archive/2012/12/11/2812849.html" target="_blank" rel="external">jsonp详解</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/20/npm-base/" itemprop="url">
                  NPM-基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-20T07:56:22+08:00" content="2016-10-20">
              2016-10-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/NPM/" itemprop="url" rel="index">
                    <span itemprop="name">NPM</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><p>npm search antd # 在已发布模块的name、tags、description字段中搜索关键字<br>npm view antd # 看该模块的package.json文件以及与NPM仓库相关的属性<br>npm list antd # 查看本地antd模块版本<br>npm root [-g] # 查看项目或全局安装路径<br>which node # 查看本地 node 安装路径<br>npm init # 初始化 package.json<br>npm install [name@version][-g]/[–save][-dev] # 装包<br>npm uninstall [name@version][-g]/[–save][-dev] # 卸载<br>npm get registry # 查询当前配置的镜像<br>npm config set registry <a href="http://registry.npm.taobao.org/" target="_blank" rel="external">http://registry.npm.taobao.org/</a> # 设置镜像</p>
<p><a href="http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html" target="_blank" rel="external">npm scripts 使用指南</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/20/javascript-base/" itemprop="url">
                  JavaScript-基础
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-20T07:53:53+08:00" content="2016-10-20">
              2016-10-20
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>JavaScript是单线程、基于原型、面向对象、弱类型的动态脚本语言。6种数据类型，其中包括5个基本数据类型：String、Number、Boolean、Null、Undefined，1个复杂数据类型：Object。<br><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript" target="_blank" rel="external">JavaScript API</a></p>
<h2 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h2><p>通过typeof进行数据类型的判断，是一个一元运算，返回值为字符串，取值如下：</p>
<blockquote>
<p>number 表示数字<br>string 表示字符串<br>boolean 表示布尔<br>object 表示对象，null、对象、数组返回的都是object类型<br>symbol 表示Symbol<br>undefined 表示Undefined<br>function 表示为一个函数  </p>
</blockquote>
<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><p>是一个三元运算，用于判断一个对象是否是另一个对象的实例，可以在继承关系中用来判断一个实例是否属于它的父类型。</p>
<h2 id="类型判断"><a href="#类型判断" class="headerlink" title="类型判断"></a>类型判断</h2><p>字符串常量是基本类型string，new String()生成的字符串是对象类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">typeof &apos;a&apos; // &apos;string&apos;</div><div class="line">typeof new String(&apos;a&apos;) // &apos;object&apos;</div><div class="line">&apos;a&apos; instanceof String // false</div><div class="line">new String(&apos;a&apos;) instanceof String // true</div><div class="line">typeof null == &apos;object&apos; // true</div><div class="line">// 在浏览器环境中，通常要查看对象内部的[[Class]]值</div><div class="line">Object.prototype.toString.call(a) // &apos;[object String]&apos;</div></pre></td></tr></table></figure>
<p>null、undefined、’’、0 在条件表达式中被判定为false  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">typeof undefined // undefined</div><div class="line">undefined instanceof Object // false</div><div class="line">typeof null // &apos;object&apos;</div><div class="line">null instanceof Object // false</div><div class="line">undefined == null // true</div><div class="line">undefined === null // false</div></pre></td></tr></table></figure>
<h2 id="undefined-和-null"><a href="#undefined-和-null" class="headerlink" title="undefined 和 null"></a>undefined 和 null</h2><p>null和undefined基本是同义的，只有一些细微的差别。</p>
<p>null表示”没有对象”，即该处不应该有值。典型用法是：</p>
<ul>
<li>做为函数的参数，表示该函数的参数不是对象</li>
<li>作为对象原型链的终点，Object.getPrototypeOf(Object.prototype) 为 null</li>
</ul>
<p>undefined表示”缺少值”，就是此处应该有一个值，但是还没有定义。典型用法是：</p>
<ul>
<li>变量被声明了，但没有赋值时，就等于undefined</li>
<li>调用函数时，应该提供的参数没有提供，该参数等于undefined</li>
<li>对象没有赋值的属性，该属性的值为undefined</li>
<li>函数没有返回值时，默认返回undefined</li>
</ul>
<h2 id="函数参数数量"><a href="#函数参数数量" class="headerlink" title="函数参数数量"></a>函数参数数量</h2><p>函数名.length 获取函数定义中的参数个数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var fun = function (arg1, arg2) &#123;&#125;;</div><div class="line">fun.length; // 2</div></pre></td></tr></table></figure></p>
<h2 id="判断数组的方法"><a href="#判断数组的方法" class="headerlink" title="判断数组的方法"></a>判断数组的方法</h2><p>Array.isArray(a) === true<br>a.constructor === Array<br>Object.prototype.toString.call(a) === ‘[object Array]’<br>a instanceof Array  </p>
<h2 id="Array-API"><a href="#Array-API" class="headerlink" title="Array API"></a>Array API</h2><p>array.push() – 将一个或多个新元素添加到数组结尾，返回数组新长度<br>array.unshift() – 将一个或多个新元素添加到数组开始，返回数组新长度<br>array.splice(start, count, item1, …, itemN) – 删除从第一个数为起始、第二个参数为个数的这些元素后，在被截取掉的地方追加一个或多个从第三个参数开始的新元素，操作数组本身<br>array.pop() – 移除最后一个元素并返回该元素值<br>array.shift() – 移除最前一个元素并返回该元素值<br>array.slice(start, end) – 返回第一个参数起始、第二个参数截至、左闭右开的数组，不操作数组本身<br>array.concat() – 将两个数组进行合并，返回数据合并的结果，参数可为元素序列或数组，不操作数据本身<br>array.join() – 将数组元素用参数中的符号连接起来，返回一个字符串<br>array.sort() – 排序，可将排序方法以参数传入，如没有参数，按字符串正序排序的，操作数组本身<br>array.reverse() – 逆序排序，操作数组本身<br>array.indexOf() – 一个参数时，返回元素在数据中第一次出现的索引，比较时进行的是”===”的比较；两个参数时，第一个参数为起始位置，第二个参数为查询元素；<br>array.lastIndexOf() – 类似indefOf，区别是从找到的是数组中最后一个出现的该元素的索引<br>array.every(function(item, index, array){}) – 对数组的每一个元素进行函数的运行，如果函数返回的都是true，最后则返回true；如果有一个元素返回false，最后则返回false <em>（注意，return false可终止循环）</em><br>array.some(function(item, index, array){}) – 对数组的每一个元素进行函数的运行，如果函数有一个返回的是true，最后则返回true；如果都返回false，最后则返回false<br>array.filter(function(item, index, array){}) – 对数组的每一个元素进行函数的运行，将函数返回值为false的过滤掉返回<br>array.forEach(function(item,index,array){}) – 对数组的每一个元素进行函数的运行<br>array.map(function(item,index,array){}) – 对数组的每一个元素进行函数的运行，把函数每次运行的结果按序组成的新数组返回<br>array.reduce(function(prev,cur,index,array){}) – 调用一个函数，pre为上一次调用回调返回的值或者是提供的初始值，第二个参数为当前被处理的元素，第三个参数为当前位置，第四个参数为数组，依次将每次调用的结果替换掉数据中的元素，最后返回一个值<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">var arr = [0, 1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9]; // [0, 1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9]</div><div class="line">arr.push(10, 11); // 返回12， [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</div><div class="line">arr.unshift(-2, -1); // 返回14，[-2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]</div><div class="line">arr.pop(); // 返回11，[-2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</div><div class="line">arr.pop(); // 返回10，[-2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.shift(); // 返回-2，[-1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.shift(); // 返回-1，[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.slice(1, 3); // 返回[1, 2]，[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.splice(1, 2, 11, 12); // 返回[1, 2]，[0, 11, 12, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.splice(1, 2, 1, 2, 3); // 返回[11, 12]，[0, 1, 2, 3, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.splice(3, 1); // 返回[3]，[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.concat([-2, -1]); // 返回[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, -2, -1]，[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">function sortFun(a, b) &#123;</div><div class="line">  return a - b;</div><div class="line">&#125;</div><div class="line">arr.sort(sortFun); // 返回[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]，[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]</div><div class="line">arr.reverse(); // 返回[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]，[9, 8, 7, 6, 5, 4, 3, 3, 2, 1, 0]</div><div class="line">arr.reduce(function(prev, cur, index, array)&#123;return prev + cur;&#125;); // 返回45</div><div class="line">arr.reduce(function(prev, cur, index, array)&#123;return prev + cur;&#125;, 1); // 返回46</div></pre></td></tr></table></figure></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">详见Array API</a></p>
<h2 id="String-API"><a href="#String-API" class="headerlink" title="String API"></a>String API</h2><p>String.fromCharCode(num1, …, numN) – 返回使用指定的Unicode值序列创建的字符串<br>String.raw(callSite, …substitutions) – 获取一个模板字符串的原始字面量值的，callSite是一个模板字符串，substitutions表示任意个内插表达式对应的值<br>str.charAt(index) – 返回指定位置的字符<br>str.charCodeAt(index) – 返回指定位置字符的UTF-16代码单元值的数字<br>str.concat(str2, …, strN) –返回原字符串拼接一个或多个字符串的新字符串<br>str.slice(start, end) – 返回start开始、end结束、左闭右开的字符串<br>str.substring(start, end) – 返回较小值开始、较大值结束、左闭右开的字符串<br>str.substr(start, count) – 返回start开始的count个字符组成的字符串<br>str.includes(searchStr[, position]) – 判断从position位置开始包含position是否存在searchStr字符串<br>str.indexOf(searchValue[, fromIndex]) – 返回从fromIndex开始第一次出现searchValue的位置索引，没有返回-1<br>str.lastIndexOf(searchValue[, fromIndex]) – 返回从fromIndex从后向前查找，第一次出现searchValue的位置索引，没有返回-1<br>str.localeCompare() – 返回一个数字(1或-1或0)来指示一个参考字符串是否在排序顺序在前面或后面或与给定字符串相同<br>str.repeat() – 返回包含被连接在一起的指定数量的字符串的副本<br>str.match(regexp) –  返回一个包含了整个匹配结果以及任何括号捕获的匹配结果的 数组，如果没有匹配返回null<br>str.replace(regexp|substr, newSubStr|function) – 返回一个由替换值替换一些或所有匹配的模式后的新字符串，模式可以是一个字符串或者一个正则表达式，function返回值将替换掉第一个参数匹配到的结果<br>str.search(regexp) – 执行正则表达式和String对象之间的一个匹配搜索的索引，没有返回-1<br>str.trim() – 返回删除两端空白字符的字符串<br>str.trimLeft() – 返回删除左端空白字符的字符串<br>str.trimRight() – 返回删除右端空白字符的字符串<br>str.toLocaleLowerCase() – 返回使用本地化映射规则将字符串转化成小写形的式<br>str.toLocaleUpperCase() – 返回使用本地化映射规则将字符串转化成大写的形式<br>str.toLowerCase() – 返回将字符串转化成小写的形式<br>str.toUpperCase() – 返回将字符串转化成大写的形式<br>str.toString() – 返回指定对象的字符串形式<br>str.valueOf() – 返回一个String对象的原始值<br>str.split([separator[, limit]]) – 返回使用separator分隔字符串组成的数组，limit限定返回的分割片段数量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">var str = &apos;abcdefghijklmnopqrstuvwxyz&apos;;</div><div class="line">var str2 = String.fromCharCode(65, 66, 67); // 返回ABC</div><div class="line">String.raw `Hi\n!`; // 返回&apos;Hi\n!&apos;</div><div class="line">str.charAt(3); // 返回&apos;d&apos;</div><div class="line">str.charCodeAt(3); // 返回100</div><div class="line">str.concat(str2); // 返回&apos;abcdefghijklmnopqrstuvwxyzABC&apos;</div><div class="line">str.slice(1,5); // 返回&apos;bcde&apos;</div><div class="line">str.substring(1, 3); // 返回&apos;bc&apos;</div><div class="line">str.substring(3, 1); // 返回&apos;bc&apos;</div><div class="line">str.substr(1, 3); // 返回&apos;bcd&apos;</div><div class="line">str.includes(&apos;xyz&apos;); // 返回true</div><div class="line">str.includes(&apos;xyz&apos;, 24); // 返回false</div><div class="line">str.indexOf(&apos;xyz&apos;); // 返回23</div><div class="line">str.indexOf(&apos;xyz&apos;, 24); // 返回-1</div><div class="line">&apos;check&apos;.localeCompare(&apos;against&apos;); // 返回1</div><div class="line">&apos;against&apos;.localeCompare(&apos;check&apos;); // 返回-1</div><div class="line">&apos;check&apos;.localeCompare(&apos;check&apos;); // 返回0</div><div class="line">str.repeat(2); // 返回&apos;abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz&apos;</div><div class="line">var str3 = &apos;number in number&apos;;</div><div class="line">str3.match(&apos;n&apos;); // 返回[&quot;n&quot;, index: 0, input: &quot;number in number&quot;]</div><div class="line">str3.match(/n/); // 返回[&quot;n&quot;, index: 0, input: &quot;number in number&quot;]</div><div class="line">str3.match(/n/g); // 返回[&quot;n&quot;, &quot;n&quot;, &quot;n&quot;]</div><div class="line">str.replace(&apos;abc&apos;, &apos;123&apos;); // 返回&apos;123defghijklmnopqrstuvwxyz&apos;</div><div class="line">str.replace(&apos;abc&apos;, () =&gt; &apos;123&apos;); // 返回&apos;123defghijklmnopqrstuvwxyz&apos;</div><div class="line">str.search(&apos;b&apos;); // 返回1</div><div class="line">str.toLocaleLowerCase(); // 返回&apos;abcdefghijklmnopqrstuvwxyz&apos;</div><div class="line">str.toLocaleUpperCase(); // 返回&apos;ABCDEFGHIJKLMNOPQRSTUVWXYZ&apos;</div><div class="line">str.toLowerCase(); // 返回&apos;abcdefghijklmnopqrstuvwxyz&apos;</div><div class="line">str.toUpperCase(); // 返回&apos;ABCDEFGHIJKLMNOPQRSTUVWXYZ&apos;</div><div class="line">var num = 1234;</div><div class="line">num.toString(); // 返回&apos;1234&apos;</div><div class="line">&apos;a|b|c|d|e|f|&apos;.split(&apos;|&apos;); // 返回 [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;&quot;]</div><div class="line">&apos;a|b|c|d|e|f|&apos;.split(&apos;|&apos;, 3); // 返回 [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;]</div></pre></td></tr></table></figure>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="external">详见String API</a></p>
<h2 id="Object-freeze-浅冻结"><a href="#Object-freeze-浅冻结" class="headerlink" title="Object.freeze(浅冻结)"></a>Object.freeze(浅冻结)</h2><p>Object.freeze(object)函数执行下面的操作：</p>
<blockquote>
<p>使对象不可扩展，无法向其添加新属性<br>为对象的所有属性将 configurable 特性设置为 false。在 configurable 为 false 时，无法更改属性的特性且无法删除属性<br>为对象的所有数据属性将 writable 特性设置为 false。当 writable 为 false 时，无法更改数据属性值</p>
</blockquote>
<p>实现深冻结<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function deepFreeze(obj) &#123;</div><div class="line">  var propNames = Object.getOwnPropertyNames(obj);</div><div class="line">  propNames.forEach(function(name) &#123;</div><div class="line">    var prop = obj[name];</div><div class="line">    if (typeof prop == &apos;object&apos; &amp;&amp; prop !== null)</div><div class="line">      deepFreeze(prop);</div><div class="line">  &#125;);</div><div class="line">  return Object.freeze(obj);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="函数表达式没有变量提升"><a href="#函数表达式没有变量提升" class="headerlink" title="函数表达式没有变量提升"></a>函数表达式没有变量提升</h2><p>在JavaScript中，变量和函数的声明都会提升到作用域的最前面。函数表达式并没有被提升，这也是函数表达式与函数声明的区别。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(function()&#123;</div><div class="line">  f1(); // ReferenceError: f1 is not a function</div><div class="line">  f2();</div><div class="line">  var f1 = function()&#123;&#125;;</div><div class="line">  function f2()&#123;&#125;</div><div class="line">&#125;)();</div></pre></td></tr></table></figure></p>
<p>上面代码中函数声明f2被提升，所以在前面调用f2是没问题的。虽然变量f1也被提升，但f1提升后的值为undefined，其真正的初始值是在执行到函数表达式处被赋予的。所以只有声明是被提升的。</p>
<h2 id="try、catch、finally"><a href="#try、catch、finally" class="headerlink" title="try、catch、finally"></a>try、catch、finally</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">try &#123;</div><div class="line">    tryStatements // 尝试执行代码块</div><div class="line">&#125; catch (exception) &#123;</div><div class="line">    catchStatements// 捕获错误的代码块</div><div class="line">&#125; finally &#123;</div><div class="line">    finallyStatements// 无论try/catch结果如何都会执行的代码块</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="defineGetter-、-defineSetter"><a href="#defineGetter-、-defineSetter" class="headerlink" title="__defineGetter__、__defineSetter__"></a><code>__defineGetter__、__defineSetter__</code></h2><p>类似面向对象语言中的get和set关键字</p>
<p>有两种方法来定义Getter或Setter方法：</p>
<p>1.在对象初始化时定义<br>2.在对象定义后通过在原型上定义<code>__defineGetter__、__defineSetter__</code>的方法来追加定义</p>
<h2 id="改变上下文的方式"><a href="#改变上下文的方式" class="headerlink" title="改变上下文的方式"></a>改变上下文的方式</h2><p>call – fun.call(context, arg1, … , argn)<br>applay – fun.call(context, [arg1, … , argn])<br>bind – fun.bind(context, arg1, … , argn)  </p>
<h2 id="作用域和作用域链"><a href="#作用域和作用域链" class="headerlink" title="作用域和作用域链"></a><a href="http://www.cnblogs.com/lhb25/archive/2011/09/06/javascript-scope-chain.html" target="_blank" rel="external">作用域和作用域链</a></h2><h3 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h3><p>作用域就是变量与函数的可访问范围，即作用域控制着变量与函数的可见性和生命周期。在JavaScript中，变量的作用域有全局作用域和局部作用域两种。  </p>
<p>全局作用域：</p>
<blockquote>
<p>在代码中任何地方都能访问到的对象拥有全局作用域<br>最外层函数和在最外层函数外面定义的变量拥有全局作用域<br>所有末定义直接赋值的变量自动声明为拥有全局作用域<br>所有window对象的属性拥有全局作用域</p>
</blockquote>
<p>局部作用域:</p>
<blockquote>
<p>局部作用域一般只在固定的代码片段内可访问到<br>函数内部定义的变量和函数，也会看到有人把这种作用域称为函数作用域</p>
</blockquote>
<h3 id="作用域链"><a href="#作用域链" class="headerlink" title="作用域链"></a>作用域链</h3><p>在JavaScript中，函数也是对象。函数对象和其它对象一样，拥有可以通过代码访问的属性和一系列仅供JavaScript引擎访问的内部属性。其中一个内部属性是[[Scope]]，由ECMA-262标准第三版定义，该内部属性包含了函数被创建的作用域中对象的集合，这个集合被称为函数的作用域链，它决定了哪些数据能被函数访问。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">var g = &apos;全局变量&apos;;</div><div class="line">var f1 = function() &#123;</div><div class="line">  debugger;</div><div class="line">  var part1 = &apos;局部变量1&apos;;</div><div class="line">  var f2 = function() &#123;</div><div class="line">    debugger;</div><div class="line">    var part2 = &apos;局部变量2&apos;;</div><div class="line">  &#125;</div><div class="line">  f2();</div><div class="line">&#125;</div><div class="line">f1();</div><div class="line"></div><div class="line"></div><div class="line">var g = &apos;全局变量&apos;;</div><div class="line">function f1() &#123;</div><div class="line">  debugger;</div><div class="line">  var part1 = &apos;局部变量1&apos;;</div><div class="line">  function f2() &#123;</div><div class="line">    debugger;</div><div class="line">    var part2 = part1;</div><div class="line">  &#125;</div><div class="line">  f2();</div><div class="line">&#125;</div><div class="line"></div><div class="line">f1();</div></pre></td></tr></table></figure>
<p>在函数执行时，会创建一个称为“运行期上下文(execution context)”的内部对象，运行期上下文定义了函数执行时的环境。每个运行期上下文都有自己的作用域链，用于标识符解析，当运行期上下文被创建时，而它的作用域链初始化为当前运行函数的[[Scope]]所包含的对象。这些值按照它们出现在函数中的顺序被复制到运行期上下文的作用域链中。它们共同组成了一个新的对象，叫“活动对象(activation object)”，该对象包含了函数的所有局部变量、命名参数、参数集合以及this，然后此对象会被推入作用域链的前端，当运行期上下文被销毁，活动对象也随之销毁。</p>
<p>在函数执行过程中，每遇到一个变量，都会经历一次标识符解析过程以决定从哪里获取和存储数据。该过程从作用域链头部，也就是从活动对象开始搜索，查找同名的标识符，如果找到了就使用这个标识符对应的变量，如果没找到继续搜索作用域链中的下一个对象，如果搜索完所有对象都未找到，则认为该标识符未定义。</p>
<p>一般情况下，在运行期上下文运行的过程中，其作用域链只会被 with 语句和 catch 语句影响。当代码运行到with语句时，运行期上下文的作用域链临时被改变了。一个新的可变对象被创建，它包含了参数指定的对象的所有属性。这个对象将被推入作用域链的头部，这意味着函数的所有局部变量现在处于第二个作用域链对象中，因此访问代价更高了。因此在程序中应避免使用with语句。</p>
<p>另外一个会改变作用域链的是try-catch语句中的catch语句。当try代码块中发生错误时，执行过程会跳转到catch语句，然后把异常对象推入一个可变对象并置于作用域的头部。在catch代码块内部，函数的所有局部变量将会被放在第二个作用域链对象中。一旦catch语句执行完毕，作用域链即会返回到之前的状态。</p>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a><a href="http://www.ruanyifeng.com/blog/2009/08/learning_javascript_closures.html" target="_blank" rel="external">闭包</a></h2><p>Javascript语言，函数内部可以直接读取全局变量，在函数外部无法读取函数内的局部变量。如果要得到函数f1内的局部变量，就需要在函数f1的内部，再定义一个函数f2，f2可以读取f1中的局部变量，只要把f2返回，就可以在f1外部读取它的内部变量了。<strong>这样的f2函数，就是闭包。</strong>闭包的定义是“能够读取其他函数内部变量的函数”，其实简单理解就是“一个定义在函数中的函数”。注意，f1是f2的父函数，而f2被赋给了一个全局变量，这导致f2始终在内存中，而f2的存在依赖于f1，因此f1也始终在内存中，不会在调用结束后，被垃圾回收机制（garbage collection）回收。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">// 函数内部可以直接读取全局变量，在函数外部无法读取函数内的局部变量</div><div class="line">var g = &apos;全局变量&apos;;</div><div class="line">function f1() &#123;</div><div class="line">  console.log(g);</div><div class="line">  var part = &apos;局部变量&apos;;</div><div class="line">&#125;</div><div class="line">// part is not defined</div><div class="line">console.log(part);</div><div class="line"></div><div class="line">// 使用闭包</div><div class="line">function f1() &#123;</div><div class="line">  var part = &apos;局部变量&apos;;</div><div class="line">  function f2() &#123;</div><div class="line">    return part;</div><div class="line">  &#125;</div><div class="line">  return f2;</div><div class="line">&#125;</div><div class="line">var res1 = f1();</div><div class="line">var partW = res1();</div><div class="line">console.log(partW);</div></pre></td></tr></table></figure></p>
<p>闭包可以用在许多地方，它的最大用处有两个：一个是前面提到的可以读取函数内部的变量，另一个就是让这些变量的值始终保持在内存中。</p>
<p>使用闭包的注意点：<br>1）由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露，解决方法是，在退出函数之前，将不使用的局部变量全部删除。<br>2）闭包会在父函数外部，改变父函数内部变量的值。所以，如果你把父函数当作对象使用，把闭包当作它的公用方法，把内部变量当作它的私有属性，这时一定要小心，不要随便改变父函数内部变量的值。</p>
<h2 id="原型、原型链"><a href="#原型、原型链" class="headerlink" title="原型、原型链"></a>原型、原型链</h2><p><a href="http://blog.jobbole.com/9648/" target="_blank" rel="external">理解JavaScript原型</a><br><a href="http://blog.csdn.net/wxw_317/article/details/49617767" target="_blank" rel="external">彻底理解JavaScript原型</a></p>
<h3 id="原型"><a href="#原型" class="headerlink" title="原型"></a>原型</h3><p>原型是一个对象，所有对象都可以成为原型，其它对象可以通过它实现属性继承。原型真正魅力体现在多个实例共用一个通用原型的时候。如果试图获取一个主数据类型的原型时，它会被强制转化成了一个对象。</p>
<p>构造函数提供了一种方便的跨浏览器机制，这种机制允许在创建实例时为实例提供一个通用的原型。函数A的原型属性(prototype property )是一个对象，当这个函数被用作构造函数来创建实例时，该函数的原型属性将被作为原型赋值给所有对象实例，即所有实例的原型引用的是函数的原型属性。<strong>即所有实例的原型引用的是函数的原型属性。</strong></p>
<p>如果修改了构造函数的原型属性，那么已经存在的该构造函数的实例将获得构造函数的最新版本。<br>如果修改了构造函数的原型属性所指向的对象，那么新创建实例时实例原型所指向的是新对象，但是这并不会影响已经创建的实例的原型。</p>
<p>要注意区分原型属性和原型对象：  </p>
<blockquote>
<p><code>object.prototype</code> – 原型属性<br><code>Object.getPrototypeOf(object) 、object.__proto__ 、object.constructor.prototype</code> – 原型对象，真正的原型<br>constructor – 是原型对象的属性，对应创建所有指向该原型的实例的构造函数<br>对于所有对象，都有<code>__proto__</code>属性，这个属性对应该对象的原型<br>对于所有函数对象，除了<code>__proto__</code>属性之外，还有<code>prototype</code>属性，当一个函数被用作构造函数来创建实例时，该函数的<code>prototype</code>属性值将被作为原型赋值给所有对象实例（也就是设置实例的<code>__proto__</code>属性）</p>
</blockquote>
<p>通过修改原型可以达到继承的效果，如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">var a = &#123;&#125;;</div><div class="line">a.__proto__ = Array.prototype;</div><div class="line">a.length; // 0</div></pre></td></tr></table></figure></p>
<img src="/2016/10/20/javascript-base/prototype.png" title="原型示意图">
<h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><p>所有的对象在默认的情况下都有一个原型，因为原型本身也是对象，所以每个原型自身又有一个原型，对象的原型指向对象的父，而父的原型又指向父的父，我们把这种通过原型层层连接起来的关系撑为原型链。这条链的末端一般总是默认的对象原型。</p>
<p>所有对象的原型都将追溯到”Object{}”对象，Object对象本身是一个函数对象。如果a的原型属于A的原型链，表达式 a instance of A 值为true。</p>
<p>原型的继承机制是发生在内部且是隐式的。当想要获得一个对象a的属性foo的值，javascript会在原型链中查找foo的存在，如果找到则返回foo的值，否则undefined被返回。如果想要覆盖原型链上的一些属性，就可以直接在对象中定义这些属性。</p>
<p><code>hasOwnProperty</code>是<code>Object.prototype</code>的一个方法，该方法能判断一个对象是否包含自定义属性而不是原型链上的属性，<code>hasOwnProperty</code>是JavaScript中唯一一个处理属性但是不查找原型链的函数。</p>
<p>二维作用域链查找：当代码需要查找一个属性或者描述符的时候，首先会通过作用域链来查找相关的对象；一旦对象被找到，就会根据该对象的原型链来查找属性。</p>
<h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><p>详见 <a href="http://www.ruanyifeng.com/blog/2013/01/javascript_strict_mode.html" target="_blank" rel="external">Javascript 严格模式详解</a></p>
<h2 id="DOM和BOM"><a href="#DOM和BOM" class="headerlink" title="DOM和BOM"></a>DOM和BOM</h2><p>参考  <a href="http://www.cnblogs.com/yexiaochai/archive/2013/05/28/3102674.html" target="_blank" rel="external">DOM与BOM</a> 和 <a href="http://www.jb51.net/article/55851.htm" target="_blank" rel="external">BOM和DOM详解</a></p>
<p>javascript 有三部分构成：ECMAScript，DOM和BOM。根据宿主（浏览器）的不同，具体的表现形式也不尽相同，ie和其他的浏览器风格迥异。</p>
<blockquote>
<p>核心（ECMAScript）：描述了JS的语法和基本对象<br>文档对象模型（DOM）：描述了处理网页内容的方法和接口，Document对象<br>浏览器对象模型（BOM）：描述了与浏览器交互的方法和接口，Window对象  </p>
</blockquote>
<h3 id="DOM（Document-Object-Model）"><a href="#DOM（Document-Object-Model）" class="headerlink" title="DOM（Document Object Model）"></a>DOM（Document Object Model）</h3><p>DOM（文档对象模型）是W3C的标准，所有浏览器公共遵守的标准。<br>DOM 是HTML和XML的应用程序接口（API），就是把「文档」当做一个「对象」来看待。<br>DOM 使程序和脚本有能力动态地访问和更新文档的内容、结构以及样式，是平台和语言中立的接口。<br><img src="/2016/10/20/javascript-base/DOM.gif" title="DOM基本操作思维导图"></p>
<h3 id="BOM（Browser-Object-Model）"><a href="#BOM（Browser-Object-Model）" class="headerlink" title="BOM（Browser Object Model）"></a>BOM（Browser Object Model）</h3><p>BOM（浏览器对象模型）是各个浏览器厂商根据DOM在各自浏览器上的实现，表现为不同浏览器定义有差别，实现方式不同。<br>BOM 就是把「浏览器」当做一个「对象」来看待，BOM除了可以访问文档中的组件之外，还可以访问浏览器的组件。<br>BOM 定义了JavaScript可以进行操作的浏览器的各个功能部件的接口，主要处理浏览器窗口和框架，不过通常浏览器特定的JavaScript扩展都被看做BOM的一部分，这些扩展包括：  </p>
<blockquote>
<p>弹出新的浏览器窗口<br>移动、关闭浏览器窗口以及调整窗口大小<br>提供Web浏览器详细信息的定位对象<br>提供用户屏幕分辨率详细信息的屏幕对象<br>对cookie的支持<br>IE扩展了BOM，加入了ActiveXObject类，可以通过JavaScript实例化ActiveX对象</p>
</blockquote>
<img src="/2016/10/20/javascript-base/Window.gif" title="Window对象思维导图">
<p>注意：window 是 BOM 对象，而非 js 对象  </p>
<h3 id="关系"><a href="#关系" class="headerlink" title="关系"></a>关系</h3><p>Javacsript是通过访问BOM对象来访问、控制、修改客户端(浏览器)，由于<strong>BOM的window</strong>包含了document，因此可以直接使用window对象的document属性来访问、检索、修改XHTML文档内容与结构。因为<strong>document对象又是DOM</strong>模型的根节点，也就是DOM的最根本的对象是BOM的window对象的子对象，可以说，BOM包含了DOM，浏览器提供出来给予访问的是BOM对象，从BOM对象再访问到DOM对象，从而js可以操作浏览器以及浏览器读取到的文档。<br>区别：DOM描述了处理网页内容的方法和接口，BOM描述了与浏览器进行交互的方法和接口。</p>
<img src="/2016/10/20/javascript-base/domAndBom.jpg" title="BOM和DOM的结构关系示意图">
<h2 id="获取字符串实际长度-包含汉字"><a href="#获取字符串实际长度-包含汉字" class="headerlink" title="获取字符串实际长度(包含汉字)"></a>获取字符串实际长度(包含汉字)</h2><p>方法一<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function getStrLength1 (str) &#123;</div><div class="line">  // 获得字符串实际长度，中文2，英文1</div><div class="line">  var realLength = 0, len = str.length, charCode = -1;</div><div class="line">  for (var i = 0; i &lt; len; i++) &#123;</div><div class="line">    charCode = str.charCodeAt(i);</div><div class="line">    if (charCode &gt;= 0 &amp;&amp; charCode &lt;= 128)</div><div class="line">      realLength += 1;</div><div class="line">    else</div><div class="line">      realLength += 2;</div><div class="line">  &#125;</div><div class="line">  return realLength;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>方法二<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function getStrLength2 (str) &#123;</div><div class="line">  // 先把中文替换成两个字节的英文，再计算长度</div><div class="line">  // [\u0391-\uFFE5]匹配双字节字符（汉字+符号）</div><div class="line">  // str.replace(/[^\x00-\xff]/g, &apos;aa&apos;);</div><div class="line">  // [^\x00-\xff]，匹配双字节字符，检查是否是汉字或者全角</div><div class="line">  return str.replace(/[\u0391-\uFFE5]/g,&quot;aa&quot;).length;  </div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<h2 id="关联数组"><a href="#关联数组" class="headerlink" title="关联数组"></a>关联数组</h2><p>关联数组是指每个元素自定义字符串的下标的数组，由于是自定义的下标所以关联数组的length属性没有效果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 直接定义数组</div><div class="line">myhash = &#123;&quot;key1&quot;: &quot;val1&quot;, &quot;key2&quot;: &quot;val2&quot; &#125;</div><div class="line"></div><div class="line">// 用Array 定义数组</div><div class="line">myhash = new Array();</div><div class="line">myhash[&quot;key1&quot;] = &quot;val1&quot;;</div><div class="line">myhash[&quot;key2&quot;] = &quot;val2&quot;;</div></pre></td></tr></table></figure>
<p>感觉关联数组和对象基本上一样，目前只看到<strong>可以用<code>obj.key1</code>引用对象的属性，但不能<code>myhash.key1</code>这样引用数组的元素</strong>这一个区别。</p>
<h2 id="对象遍历"><a href="#对象遍历" class="headerlink" title="对象遍历"></a>对象遍历</h2><p>发现javascript中的对象，如果key值为整数或整数字符，则该对象会的属性会按key值排序，使用时要注意。</p>
<img src="/2016/10/20/javascript-base/obj1.png" title="对象属性">
<h2 id="JSON对象"><a href="#JSON对象" class="headerlink" title="JSON对象"></a>JSON对象</h2><h3 id="JSON-stringify-value-replacer-space"><a href="#JSON-stringify-value-replacer-space" class="headerlink" title="JSON.stringify(value [, replacer] [, space])"></a>JSON.stringify(value [, replacer] [, space])</h3><ul>
<li>value：是必选字段。就是你输入的对象，比如数组，类等。 </li>
<li>replacer：这个是可选的。它又分为2种方式，一种是数组，第二种是方法。 <ul>
<li>情况一：replacer为数组时，通过后面的实验可以知道，它是和第一个参数value有关系的。一般来说，系列化后的结果是通过键值对来进行表示的。 所以，如果此时第二个参数的值在第一个存在，那么就以第二个参数的值做key，第一个参数的值为value进行表示，如果不存在，就忽略。</li>
<li>情况二：replacer为方法时，那很简单，就是说把系列化后的每一个对象（记住是每一个）传进方法里面进行处理。 </li>
</ul>
</li>
<li>space：就是用什么来做分隔符的。<ul>
<li>如果省略的话，那么显示出来的值就没有分隔符，直接输出来 。</li>
<li>如果是一个数字的话，那么它就定义缩进几个字符，当然如果大于10 ，则默认为10，因为最大值为10。</li>
<li>如果是一些转义字符，比如“\t”，表示回车，那么它每行一个回车。 </li>
<li>如果仅仅是字符串，就在每行输出值的时候把这些字符串附加上去。当然，最大长度也是10个字符。 </li>
</ul>
</li>
</ul>
<h3 id="JSON-parse"><a href="#JSON-parse" class="headerlink" title="JSON.parse()"></a>JSON.parse()</h3><p>将字符串转为json对象，不允许有尾逗号</p>
<h2 id="操作event对象"><a href="#操作event对象" class="headerlink" title="操作event对象"></a>操作event对象</h2><p>在我的项目中，想要点击Grid行的时候有点击行首部Checkbox的效果，对我来说最简单的方式就是在点击行的事件中调用点击Checkbox的方法handleChecked，但handleChecked需要event参数并且要取event.target.checked值。于是我克隆了一个event对象，显示的给它的target.checked赋值，并使用下面的语句给event的target赋checked属性，即可达到想要的效果。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">event.target.setAttribute(&apos;checked&apos;, true);</div><div class="line">event.target.getAttribute(&apos;checked&apos;, true);</div></pre></td></tr></table></figure></p>
<h2 id="setTimeout-setInterval-第三个参数"><a href="#setTimeout-setInterval-第三个参数" class="headerlink" title="setTimeout/setInterval 第三个参数"></a>setTimeout/setInterval 第三个参数</h2><p>setTimeout/setInterval 常用的都是传入两个参数，callback 函数和 time 延迟时间，第三个参数开始以及后面的参数，都会以作为参数传入到 callback 函数中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function func(arg1, arg2) &#123;</div><div class="line">  console.log(arg1, arg2);</div><div class="line">&#125;</div><div class="line">setTimeout(func, 1000, &apos;first&apos;, &apos;second&apos;); // 输出 first second</div></pre></td></tr></table></figure></p>
<h2 id="如何让setTimeout立即执行"><a href="#如何让setTimeout立即执行" class="headerlink" title="如何让setTimeout立即执行"></a>如何让setTimeout立即执行</h2><p>注意，不是time, 而是time(), 这样浏览器解码的时候扫到这一行的代码直接就执行了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">function time()&#123;</div><div class="line">  console.log(&quot;it&apos;s A good question&quot;);</div><div class="line">&#125;</div><div class="line">setTimeOut( time(), 100000 );</div></pre></td></tr></table></figure></p>
<h2 id="实现鼠标双击事件不触发单击事件"><a href="#实现鼠标双击事件不触发单击事件" class="headerlink" title="实现鼠标双击事件不触发单击事件"></a>实现鼠标双击事件不触发单击事件</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">var timeFunName = null;</div><div class="line">// 单击事件处理</div><div class="line">$(&quot;button&quot;).bind(&quot;click&quot;, function () &#123;         </div><div class="line">  // 取消上次延时未执行的方法      </div><div class="line">  clearTimeout(timeFunName);</div><div class="line">  // 延时300毫秒执行单击</div><div class="line">  timeFunName = setTimeout(function () &#123;</div><div class="line">    // TODO 执行单击操作</div><div class="line">  &#125;, 300);</div><div class="line">&#125;);</div><div class="line">// 双击事件处理</div><div class="line">$(&quot;button&quot;).bind(&quot;dblclick&quot;, function () &#123;</div><div class="line">  // 取消上次延时未执行的方法</div><div class="line">  clearTimeout(timeFunName);</div><div class="line">  // TODO 执行双击操作</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="new关键字"><a href="#new关键字" class="headerlink" title="new关键字"></a>new关键字</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">function FuncA(name) &#123;</div><div class="line">    this.name = name;</div><div class="line">&#125;;</div><div class="line">var a = new FuncA(&apos;this is functon A&apos;);</div><div class="line">console.log(a.name); // 输出 this is functon A</div></pre></td></tr></table></figure>
<p>new操作在背后做了如下操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 创建一个object，假设叫x</div><div class="line">var x = &#123;&#125;; </div><div class="line">// 把A.prototype赋给x.__proto__</div><div class="line">x.__proto__ = FuncA.prototype;</div><div class="line">// 调用A.call(x)</div><div class="line">var result = FuncA.call(x);</div><div class="line">// 如果result是对象则返回，否则返回空对象x</div><div class="line">if (typeof(result) === &quot;object&quot;)&#123;</div><div class="line">  return result;</div><div class="line">&#125;</div><div class="line">return x;</div></pre></td></tr></table></figure>
<p>因此也有：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function FuncB() &#123;</div><div class="line">  return &#123;</div><div class="line">    name: &apos;name&apos;</div><div class="line">  &#125;;</div><div class="line">&#125;</div><div class="line">var b = new FuncB();</div><div class="line">console.log(b.name); // 输出 name</div><div class="line">function FuncC() &#123;</div><div class="line">  return &apos;name&apos;;</div><div class="line">&#125;</div><div class="line">var c = new FuncC();</div><div class="line">console.log(c); // 输出 空对象</div></pre></td></tr></table></figure>
<h2 id="字符串转数字"><a href="#字符串转数字" class="headerlink" title="字符串转数字"></a>字符串转数字</h2><p>parseInt将字符串(String)类型转为整数类型，结果是整数或者NaN。从头解析string为整数，在遇到不能解析的字符时就返回已经解析的整数部分，如果第一个字符就不能解析，就直接返回NaN。只有对String类型调用这些方法，这两个函数才能正确运行；对其他类型返回的都是NaN。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">parseInt(&apos;123abc&apos;); // 123</div><div class="line">parseInt(&apos;8e-10&apos;); // 8</div></pre></td></tr></table></figure></p>
<p>Number() 函数，不用new操作符，把对象(Object)的值转换为数字，结果是数字（整数，小数等）或者NaN。如果使用new操作符，返回的是Number对象。如果无法转换为数字，就返回NaN。强制类型转换可以访问特定的值，即使它是另一种类型的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Number(&apos;123abc&apos;); // NaN</div><div class="line">Number(&apos;8e-10&apos;); // 8e-10</div></pre></td></tr></table></figure></p>
<p><code>+</code> 操作符可以将字符串转化为数字，如 <code>+&#39;123&#39;</code> 返回是123。和 Number() 一样，<code>+&#39;123a&#39;</code> 返回是 NaN；Number() 和 + 转换数字速度要比 parseInt() 快的多。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&apos;123&apos; - 0; // 123</div><div class="line">+&apos;123&apos;; // 123</div></pre></td></tr></table></figure></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/15/css-selector/" itemprop="url">
                  CSS-选择器
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-15T23:48:09+08:00" content="2016-10-15">
              2016-10-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="通配选择器"><a href="#通配选择器" class="headerlink" title="通配选择器"></a>通配选择器</h2><p>*{ margin:0; padding: 0; }</p>
<h2 id="元素选择器"><a href="#元素选择器" class="headerlink" title="元素选择器"></a>元素选择器</h2><p>div { background: grey; }</p>
<h2 id="ID选择器"><a href="#ID选择器" class="headerlink" title="ID选择器"></a>ID选择器</h2><p>#id { background: grey; }</p>
<h2 id="类选择器"><a href="#类选择器" class="headerlink" title="类选择器"></a>类选择器</h2><p>.class { background: grey; }<br>.class1.class2 { background: grey; } // 需要同时具有指定的类才能匹配</p>
<h2 id="群组选择器"><a href="#群组选择器" class="headerlink" title="群组选择器"></a>群组选择器</h2><p>selector1,selector2 { background: grey; } // 匹配为selector1和selector2的所有元素</p>
<h2 id="后代选择器"><a href="#后代选择器" class="headerlink" title="后代选择器"></a>后代选择器</h2><p>E F { background: grey; } // 匹配E的元素包含的所有匹配F的元素</p>
<h2 id="子选择器"><a href="#子选择器" class="headerlink" title="子选择器"></a>子选择器</h2><p>E&gt;F { background: grey; } // 匹配E的元素包含的匹配F的直接子元素</p>
<h2 id="相邻兄弟选择器"><a href="#相邻兄弟选择器" class="headerlink" title="相邻兄弟选择器"></a>相邻兄弟选择器</h2><p>E+F { background: grey; } // 匹配E的元素后紧挨着的匹配F的元素</p>
<h2 id="通用选择器"><a href="#通用选择器" class="headerlink" title="通用选择器"></a>通用选择器</h2><p>E~F { background: grey; } // 匹配E的元素后的所有匹配F的元素</p>
<h2 id="动态伪类选择器"><a href="#动态伪类选择器" class="headerlink" title="动态伪类选择器"></a>动态伪类选择器</h2><p>:link 未被访问过的超链接<br>:visited 已被访问过的超链接<br>:hover 鼠标停留<br>:ative 被激活，常用于锚点和按钮上<br>:focus 获得焦点  </p>
<p>锚点伪类的设置必须遵守”link-visited-hover-active”</p>
<h2 id="目标伪类选择器"><a href="#目标伪类选择器" class="headerlink" title="目标伪类选择器"></a>目标伪类选择器</h2><p>只有存在URL指向该匹配元素时，样式效果才会生效</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// 点击按钮时，跳到target位置，target背景为红色</div><div class="line">&lt;div id=&quot;target&quot;&gt;target&lt;/div&gt;</div><div class="line">&lt;a href=&quot;#target&quot; class=&quot;btn&quot;&gt;View project on GitHbu&lt;/a&gt;</div><div class="line">...</div><div class="line">#target:target &#123;</div><div class="line">  background: red;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="语言伪类选择器"><a href="#语言伪类选择器" class="headerlink" title="语言伪类选择器"></a>语言伪类选择器</h2><p>需要指定html或bogy的lang属性<br><code>&lt;html lang=&quot;en-US&quot;&gt;或&lt;body lang=&quot;fr&quot;&gt;</code><br>E:lang(language) 表示选择匹配E的所有元素，且匹配元素指定了lang属性，而且其值为language。</p>
<h2 id="UI元素状态伪类选择器"><a href="#UI元素状态伪类选择器" class="headerlink" title="UI元素状态伪类选择器"></a>UI元素状态伪类选择器</h2><p>:checked 选中状态，适用复选或单选<br>:enabled 启用状态，匹配启用的表单元素<br>:disabled 不可用状态，匹配禁用的表单元素  </p>
<h2 id="结构伪类选择器"><a href="#结构伪类选择器" class="headerlink" title="结构伪类选择器"></a>结构伪类选择器</h2><p>E:first-child 作为父元素的第一个子元素的元素E，与E:nth-child(1)相同<br>E:first-child 作为父元素的最后一个子元素的元素E，与E:nth-last-child(1)相同<br>E:root 选择匹配元素E所在文档的根元素，在HTML文档中，根元素始终是html，此时该选择器与html类型选择器匹配的内容相同<br>E F:nth-child(n) 选择父元素E的第n个子元素F，n的起始值为1<br>E F:nth-last-child(n) 选择父元素E的倒数第n个子元素F<br>E:nth-of-type(n) 选择父元素内具有指定类型的第n个E元素<br>E:nth-last-of-type(n) 选择父元素具有指定类型的倒数第n个E元素<br>E:first-of-type 选择父元素内具有指定类型的第一个E元素，与E:nth-of-type(1)相同<br>E:last-of-type 选择父元素内具有指定类型的最后一个E元素，与E:nth-last-of-type(1)相同<br>E:only-child 选择父元素只包含一个子元素，且该子元素匹配E元素<br>E:only-of-type 选择父元素只包含一个同类型的子元素，且该子元素匹配E元素<br>E:empty 选择没有子元素的元素，且该元素也不包含任何文本节点</p>
<h2 id="否定伪类选择器"><a href="#否定伪类选择器" class="headerlink" title="否定伪类选择器"></a>否定伪类选择器</h2><p>:not(footer){} // 选择页面中所有元素，除了”footer”元素</p>
<h2 id="伪元素"><a href="#伪元素" class="headerlink" title="伪元素"></a>伪元素</h2><p><strong>双冒号与单冒号在CSS3中主要用来区分伪类和伪元素</strong></p>
<p>::first-letter 用来选择文本块的第一个字母<br>::first-line 用来选择文本块的第一行<br>::before 和 ::after 需配合content属性，不是指存在与标记中的内容，而是可以插入额外内容的位置<br>::selection 用来匹配选中的文本，紧接收background和color属性  </p>
<h2 id="属性选择器"><a href="#属性选择器" class="headerlink" title="属性选择器"></a>属性选择器</h2><p>E[attr] 选择匹配具有属性attr的E元素<br>E[attr=val] 选择匹配具有属性attr的E元素，且attr属性值为val<br>E[attr|=val] 选择匹配E元素，且E元素定义了属性attr，attr属性值是一个具有val或者以val-开始的属性值<br>E[attr~=val] 选择匹配E元素，且E元素定义了属性attr，attr属性值具有多个空格分隔的值，其中一个值等于val<br>E[attr*=val] 选择匹配元素E，且E元素定义了属性attr，其属性值任意位置包含了val<br>E[attr^=val] 选择匹配元素E，且E元素定义了属性attr，其属性值以val开头<br>E[attr$=val] 选择匹配元素E，且E元素定义了属性attr，其属性值以val结尾  </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/10/15/react-test/" itemprop="url">
                  React-测试
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-10-15T23:39:35+08:00" content="2016-10-15">
              2016-10-15
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="前端自动化单元测试"><a href="#前端自动化单元测试" class="headerlink" title="前端自动化单元测试"></a>前端自动化单元测试</h2><p>使用<strong>Karma + Mocha + Chai + Sinon + Enzyme</strong>测试React + Redux的web应用，还可能用到Jsdom</p>
<hr>
<h3 id="工具介绍"><a href="#工具介绍" class="headerlink" title="工具介绍"></a>工具介绍</h3><p>Karma 测试过程管理工具，<strong>最重要的是可以 webpack 预处理</strong></p>
<p><a href="http://mochajs.org/" target="_blank" rel="external">Mocha</a> 测试框架，提供describe、it等函数</p>
<p><a href="http://chaijs.com/api/" target="_blank" rel="external">Chai</a> 断言库，提供expect等函数</p>
<p><a href="http://sinonjs.org/" target="_blank" rel="external">Sinon</a> 是一个mock框架，可以对任何对象进行mock</p>
<p><a href="http://airbnb.io/enzyme/" target="_blank" rel="external">Enzyme</a> React测试工具，是对React官方测试工具 react-addons-test-utils 的封装</p>
<p>Jsdom 提供DOM环境，即window、document和navigator对象</p>
<hr>
<h3 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h3><p><a href="http://www.jianshu.com/p/6726c0410650" target="_blank" rel="external">前端自动化单元测试初探</a>– 主要介绍Karma配置</p>
<p><a href="http://www.ruanyifeng.com/blog/2016/02/react-testing-tutorial.html" target="_blank" rel="external">React 测试入门教程</a>– 主要介绍React组件怎么测试</p>
<p><a href="https://segmentfault.com/a/1190000006678143?hmsr=toutiao.io&amp;utm_medium=toutiao.io&amp;utm_source=toutiao.io" target="_blank" rel="external">React+Redux单元测试一小时入门</a>、<a href="https://github.com/cody-lettau/react-redux-starter" target="_blank" rel="external">参考代码</a>– 主要介绍组件、action、reduce怎么测试</p>
<h3 id="Karma-Webpack配置"><a href="#Karma-Webpack配置" class="headerlink" title="Karma+Webpack配置"></a>Karma+Webpack配置</h3><ul>
<li>依赖包括</li>
</ul>
<figure class="highlight plain"><figcaption><span>install --save-dev 如下依赖</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">chai</div><div class="line">enzyme</div><div class="line">isparta-instrumenter-loader</div><div class="line">jsdom</div><div class="line">karma</div><div class="line">karma-chai</div><div class="line">karma-chrome-launcher</div><div class="line">karma-coverage</div><div class="line">karma-mocha</div><div class="line">karma-sinon</div><div class="line">karma-sinon-chai</div><div class="line">karma-webpack</div><div class="line">lodash</div><div class="line">mocha</div><div class="line">null-loader</div><div class="line">react-addons-test-utils</div><div class="line">sinon</div><div class="line">sinon-chai</div><div class="line">webpack-node-externals</div></pre></td></tr></table></figure>
<ul>
<li>karma.conf.js 文件如下</li>
</ul>
<figure class="highlight plain"><figcaption><span>init 生成karma.conf.js修改后</span></figcaption><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">const webpackconfig = require(&apos;./webpack.config.js&apos;);</div><div class="line">module.exports = function(config) &#123;</div><div class="line">    config.set(&#123;</div><div class="line">        basePath: &apos;&apos;,</div><div class="line">        frameworks: [&apos;mocha&apos;,&apos;sinon&apos;,&apos;chai&apos;,&apos;sinon-chai&apos;],</div><div class="line">        files: [</div><div class="line">          &apos;./test/*.js&apos;</div><div class="line">        ],</div><div class="line">        exclude: [</div><div class="line">        ],</div><div class="line">        preprocessors: &#123;</div><div class="line">            &apos;./src/containers/*&apos;: [&apos;coverage&apos;],</div><div class="line">            &apos;./test/*.js&apos;: [&apos;webpack&apos;]</div><div class="line">        &#125;,</div><div class="line">        reporters: [&apos;progress&apos;, &apos;coverage&apos;],</div><div class="line">        port: 9876,</div><div class="line">        colors: true,</div><div class="line">        logLevel: config.LOG_INFO,</div><div class="line">        autoWatch: true,</div><div class="line">        browsers: [&apos;Chrome&apos;],</div><div class="line">        singleRun: false,</div><div class="line">        concurrency: Infinity,</div><div class="line">        webpack: webpackconfig</div><div class="line">    &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>webpack配置文件需要添加如下内容，否则使用enzyme报错</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">externals: &#123;</div><div class="line">    &apos;jsdom&apos;: &apos;window&apos;,</div><div class="line">    &apos;cheerio&apos;: &apos;window&apos;,</div><div class="line">    &apos;react/addons&apos;: true,</div><div class="line">    &apos;react/lib/ExecutionEnvironment&apos;: true,</div><div class="line">    &apos;react/lib/ReactContext&apos;: true</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="测试代码样例"><a href="#测试代码样例" class="headerlink" title="测试代码样例"></a>测试代码样例</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import React from &apos;react&apos;;</div><div class="line">import &#123; Breadcrumb &#125; from &apos;antd&apos;;</div><div class="line">// 测试使用模块</div><div class="line">import &#123; shallow , mount, render &#125; from &apos;enzyme&apos;;</div><div class="line">// 待测试组件</div><div class="line">import NavPath from &apos;../src/components/NavPath&apos;;</div><div class="line"></div><div class="line">describe(&apos;NavPath Shallow&apos;, function () &#123;</div><div class="line">    it(&apos;Component Test&apos;, function () &#123;</div><div class="line">        const breadCrumb = [</div><div class="line">            &#123;key: &apos;0qqnL2f1J42bV3I9Hzavkgg%|%请假管理&apos;, name: &apos;请假管理&apos;&#125;,</div><div class="line">            &#123;key: &apos;0TT3DR6jt6Fogaimc3l3Rr%|%外出请假申请单&apos;, name: &apos;外出请假申请单&apos;&#125;,</div><div class="line">        ];</div><div class="line">        const context = &#123;</div><div class="line">            router: &#123;&#125;,</div><div class="line">            location: &#123;&#125;,</div><div class="line">        &#125;;</div><div class="line">        const navPath = shallow(&lt;NavPath breadCrumb=&#123;breadCrumb&#125; /&gt;, &#123; context &#125;);</div><div class="line">        expect(navPath.find(Breadcrumb.Item).length).to.equal(2);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="启动测试"><a href="#启动测试" class="headerlink" title="启动测试"></a>启动测试</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">karma start</div></pre></td></tr></table></figure>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/28/css-scattered/" itemprop="url">
                  CSS-零散知识
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-28T08:08:35+08:00" content="2016-09-28">
              2016-09-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="text-indent"><a href="#text-indent" class="headerlink" title="text-indent"></a>text-indent</h2><p>段落的第一行缩进</p>
<h2 id="css-hack"><a href="#css-hack" class="headerlink" title="css hack"></a>css hack</h2><p><a href="http://baike.baidu.com/view/1119452.htm?subLemmaId=1119452&amp;fromenter=CSShack" target="_blank" rel="external">css hack</a> 目的就是使你的CSS代码兼容不同的浏览器</p>
<h2 id="CSS-border实现各个方向等腰直角三角"><a href="#CSS-border实现各个方向等腰直角三角" class="headerlink" title="CSS border实现各个方向等腰直角三角"></a>CSS border实现各个方向等腰直角三角</h2><p>HTML代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;span class=&quot;border_cort&quot;&gt;&lt;/span&gt;</div><div class="line">&lt;span class=&quot;border_corb&quot;&gt;&lt;/span&gt;</div><div class="line">&lt;span class=&quot;border_corl&quot;&gt;&lt;/span&gt;</div><div class="line">&lt;span class=&quot;border_corr&quot;&gt;&lt;/span&gt;</div></pre></td></tr></table></figure></p>
<p>CSS代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">.border_cort, .border_corr, .border_corb, .border_corl &#123;</div><div class="line">    display: inline-block;</div><div class="line">    width: 0;</div><div class="line">    height: 0;</div><div class="line">    border-width: 6px;</div><div class="line">    overflow: hidden;</div><div class="line">    background-color: red;</div><div class="line">&#125;</div><div class="line">.border_cort &#123;</div><div class="line">    border-color: #333 transparent transparent;</div><div class="line">    border-style: solid dotted dotted;</div><div class="line">&#125;</div><div class="line">.border_corr &#123;</div><div class="line">    border-color: transparent #333 transparent transparent;</div><div class="line">    border-style: dotted solid dotted dotted;</div><div class="line">&#125;</div><div class="line">.border_corb &#123;</div><div class="line">    border-color: transparent transparent #333;</div><div class="line">    border-style: dotted dotted solid;</div><div class="line">&#125;</div><div class="line">.border_corl &#123;</div><div class="line">    border-color: transparent transparent transparent #333;</div><div class="line">    border-style: dotted dotted dotted solid;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<img src="/2016/09/28/css-scattered/transparent.png" title="结果如图">
<img src="/2016/09/28/css-scattered/transparent2.png" title="原理如图">
<h2 id="important"><a href="#important" class="headerlink" title="!important"></a>!important</h2><p>使用!important定义的样式拥有最高的优先级，IE6不支持，会按正常优先级显示，可以解决一些浏览器的兼容性问题。</p>
<h2 id="两个div显示在一行，分居左右"><a href="#两个div显示在一行，分居左右" class="headerlink" title="两个div显示在一行，分居左右"></a>两个div显示在一行，分居左右</h2><p>对两个div元素A、B都添加diaplay:inline-block属性，对居右元素B添加float:right属性，在B元素的后面需添加一个div并有clear:both属性用于清除float。</p>
<h2 id="min-height"><a href="#min-height" class="headerlink" title="min-height"></a>min-height</h2><p>由于某些原因导致相同元素不同高度，在IE浏览器下导致页面布局发生变化(有空位)，可以给这些相同元素添加min-height属性，取值大于等于这些不同高度中的最大值，即可是页面布局恢复正常。</p>
<h2 id="必填样式"><a href="#必填样式" class="headerlink" title="必填样式"></a>必填样式</h2><p>常见的必填样式都是在label前添加一个红色星号，可以在判断该项为必填项时给label添加一个class如notNull，并使用伪类<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">.notNull::before &#123;</div><div class="line">    color: red;</div><div class="line">    content: &quot;*&quot;;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="元素居中"><a href="#元素居中" class="headerlink" title="元素居中"></a>元素居中</h2><p>top: 50%;<br>left: 50%;<br>margin-top: 50px;// 居中元素的高度/2<br>margin-left: 50px;// 居中元素的宽度/2</p>
<p>img {<br>    display: block;<br>    margin: 0 auto;<br>}</p>
<h2 id="文字居中"><a href="#文字居中" class="headerlink" title="文字居中"></a>文字居中</h2><p>text-align: center; // 水平居中<br>line-height: @divHeight; // 垂直居中，属性值等于文字所在块的高度</p>
<h2 id="word-break属性"><a href="#word-break属性" class="headerlink" title="word-break属性"></a>word-break属性</h2><p>word-break属性规定自动换行的处理方法，通过使用该属性，可以让浏览器实现在任意位置的换行。</p>
<blockquote>
<p>normal，使用浏览器默认的换行规则<br>break-all，允许在单词内换行<br>keep-all，只能在半角空格或连字符处换行</p>
</blockquote>
<img src="/2016/09/28/css-scattered/word-break.png" title="word-break属性">
<h2 id="word-wrap属性"><a href="#word-wrap属性" class="headerlink" title="word-wrap属性"></a>word-wrap属性</h2><p>word-wrap属性允许长单词或URL地址换行到下一行。</p>
<blockquote>
<p>normal，只在允许的断字点换行（浏览器保持默认处理）<br>break-word，在长单词或URL地址内部进行换行</p>
</blockquote>
<img src="/2016/09/28/css-scattered/word-wrap.png" title="word-wrap属性">
<h2 id="图片未加载完成的占位"><a href="#图片未加载完成的占位" class="headerlink" title="图片未加载完成的占位"></a>图片未加载完成的占位</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">.imgWrapper &#123;</div><div class="line">  position: relative;</div><div class="line">  height: 0;</div><div class="line">  padding-top: 190%; // 图片高度 / 图片宽度 * 100%</div><div class="line">  overflow: hidden;</div><div class="line">&#125;</div><div class="line"></div><div class="line">img &#123;</div><div class="line">  position: absolute;</div><div class="line">  top: 0;</div><div class="line">  width: 100vw;</div><div class="line">  height: auto;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="获取滚动条宽度"><a href="#获取滚动条宽度" class="headerlink" title="获取滚动条宽度"></a>获取滚动条宽度</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 设置一个不可见的div，查看设置 scroll 前后的宽度差</span></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getScrollWidth</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">const</span> oDiv = <span class="built_in">document</span>.createElement(<span class="string">"DIV"</span>);</div><div class="line">    oDiv.style.cssText = <span class="string">"position:absolute;top:-1000px;width:100px;height:100px; overflow:hidden;"</span>;</div><div class="line">    <span class="keyword">const</span> noScroll = <span class="built_in">document</span>.body.appendChild(oDiv).clientWidth;</div><div class="line">    oDiv.style.overflowY = <span class="string">"scroll"</span>;</div><div class="line">    <span class="keyword">const</span> scroll = oDiv.clientWidth;</div><div class="line">    <span class="built_in">document</span>.body.removeChild(oDiv);</div><div class="line">    <span class="keyword">return</span> noScroll-scroll;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="英文单词使用连字符换行"><a href="#英文单词使用连字符换行" class="headerlink" title="英文单词使用连字符换行"></a>英文单词使用连字符换行</h2><p>设置标签的 <code>lang=&quot;en&quot;</code>，css 中添加 <code>hyphens: auto;</code>。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></div><div class="line">            p &#123;</div><div class="line">                width: 80px;</div><div class="line">                border: 1px solid black;</div><div class="line">                hyphens: auto;</div><div class="line">            &#125;</div><div class="line">        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">p</span> <span class="attr">lang</span>=<span class="string">"en"</span> <span class="attr">class</span>=<span class="string">"auto"</span>&gt;</span>An extremely long English word<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<img src="/2016/09/28/css-scattered/hyphens.png" title="hyphens 属性">
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/21/css-layout2/" itemprop="url">
                  CSS-布局基础2
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-21T22:52:59+08:00" content="2016-09-21">
              2016-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/CSS/" itemprop="url" rel="index">
                    <span itemprop="name">CSS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="长度单位"><a href="#长度单位" class="headerlink" title="长度单位"></a>长度单位</h2><p><strong>绝对长度单位</strong></p>
<p>in（英寸）、cm（厘米）、mm（毫米）、pt（磅）、pc（pica）  </p>
<p><strong>相对长度单位</strong>  </p>
<ul>
<li>px 像素  </li>
<li>em 是相对于文字大小的值，实际大小是受到字体尺寸影响的。例如：定义某个元素的文字大小为12pt，那么，对于这个元素来说1em就是12pt。  </li>
<li>ex 和em类似，指的是相对于文本中字母x的高度，因为不同的字体的x的高度是不同的，所以ex的实际大小，受到字体和字体尺寸两个因素的影响。 </li>
<li>% 相对于包含块的计量单位  </li>
<li>vw 基于视窗宽度的大小，10vw表示视窗宽度的10%</li>
<li>vh 基于视窗高度的大小，10vh表示视窗高度的10%</li>
</ul>
<h2 id="替换元素和非替换元素"><a href="#替换元素和非替换元素" class="headerlink" title="替换元素和非替换元素"></a>替换元素和非替换元素</h2><p><strong>替换元素</strong></p>
<p>替换元素是浏览器根据其标签的元素与属性来判断显示具体的内容，如<code>&lt;img&gt;、&lt;input&gt;、&lt;textarea&gt;、&lt;select&gt;、&lt;object&gt;</code></p>
<p><strong>非替换元素</strong></p>
<p>大多数元素是不可替换元素，他们将内容直接告诉浏览器，将其显示出来，如<code>&lt;p&gt;</code></p>
<h2 id="块级元素和行内元素"><a href="#块级元素和行内元素" class="headerlink" title="块级元素和行内元素"></a>块级元素和行内元素</h2><p><strong>块级元素</strong></p>
<p>最明显的特征就是独自占领一行，自动充满父级元素的内容区域，如<code>div、p、form、header、footer、section</code><br>通过CSS设定了浮动（float）以及设定显示（display）属性为’block’或’list-item’的元素都是块级元素</p>
<p><strong>行内元素</strong></p>
<p>允许左右都可以有元素，最常见的就是<a></a><br>通过display:’inline’设置以后都会变成行内元素</p>
<h2 id="浏览器的标准模式和怪异模式"><a href="#浏览器的标准模式和怪异模式" class="headerlink" title="浏览器的标准模式和怪异模式"></a>浏览器的标准模式和怪异模式</h2><ul>
<li>标准模式(strict mode)：浏览器按W3C标准解析执行代码</li>
<li><p>怪异模式(quirks mode)：使用浏览器自己的方式解析执行代码</p>
<p>  浏览器解析时到底使用标准模式还是怪异模式，与网页中的DTD声明直接相关，DTD声明定义了标准文档的类型（标准模式解析）文档类型，会使浏览器使用相应的方式加载网页并显示，忽略DTD声明,将使网页进入怪异模式(quirks mode)。  </p>
</li>
</ul>
<p>怪异模式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;title&gt;重庆PHP&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;h3&gt;重庆PHP，最专业的PHP社区&lt;/h3&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<p>标准模式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;</div><div class="line">&lt;html&gt;</div><div class="line">    &lt;head&gt;</div><div class="line">        &lt;title&gt;重庆PHP&lt;/title&gt;</div><div class="line">    &lt;/head&gt;</div><div class="line">    &lt;body&gt;</div><div class="line">        &lt;h3&gt;重庆PHP，最专业的PHP社区&lt;/h3&gt;</div><div class="line">    &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure></p>
<h2 id="margin属性"><a href="#margin属性" class="headerlink" title="margin属性"></a>margin属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">margin:2cm 4cm 3cm 4cm;// 值分别代表上外边距、右外边距、下外边距、左外边距</div><div class="line">margin:10px 5px 15px;// 值分别代表上外边距、右外和左外边距、下外边距</div><div class="line">margin:10px 5px;// 值分别代表上外和下外边距、右外和左外边距</div><div class="line">margin:10px;// 值代表四个外边据</div></pre></td></tr></table></figure>
<p>可选的属性值如下：  </p>
<blockquote>
<p><strong>auto:</strong> 浏览器计算外边距<br><strong>length:</strong> 具体单位计的外边距值，比如<code>px、cm</code>等，默认值是 0px<br><strong>%:</strong> 基于父元素的宽度的百分比<br><strong>inherit:</strong> 从父元素继承  </p>
</blockquote>
<p>说明如下：  </p>
<ul>
<li>块级元素的垂直相邻外边距会合并，由于块级元素独占一行，不考虑水平外边距 </li>
<li>行内元素实际上不占上下外边距，左右外边距不会合并</li>
<li>浮动元素的外边距也不会合并  </li>
<li>允许指定负的外边距值，不过使用时要小心</li>
</ul>
<p>设置块级元素的 width 可以阻止它从左到右撑满容器，再设置左右外边距为 auto 来使其水平居中。但是，当浏览器窗口比元素的宽度还要窄时，浏览器会显示一个水平滚动条来容纳页面。此时可以使用 max-width 替代 width 可以使浏览器更好地处理小窗口的情况。</p>
<h2 id="float属性"><a href="#float属性" class="headerlink" title="float属性"></a>float属性</h2><p>可选的属性值如下： </p>
<blockquote>
<p><strong>left:</strong> 元素向左浮动<br><strong>right:</strong> 元素向右浮动<br><strong>none(默认):</strong> 元素不浮动，并会显示在其在文本中出现的位置<br><strong>inherit:</strong> 从父元素继承 </p>
</blockquote>
<p>说明如下：</p>
<ul>
<li>用来定义元素在哪个方向浮动，浮动元素会生成一个块级框，而不论它本身是何种元素  </li>
<li>这个属性总应用于图像，使文本围绕在图像周围</li>
<li>如果浮动非替换元素，如div，则要指定一个明确的宽度；否则，它们会按元素内容尽可能地窄</li>
<li>如果行内有极少的空间可供浮动元素，那么这个元素会跳至下一行，直到某一行拥有足够的空间为止</li>
<li>如果浮动元素超出父容器，在父容器添加overflow:auto即可根据浮动的元素撑开容器</li>
<li>clear属性可清除浮动，值可为left或right，分别表示清除向左浮动或向右浮动</li>
<li>float只是脱离了文档流的dom空间但是还占据着文字空间</li>
</ul>
<h2 id="盒模型"><a href="#盒模型" class="headerlink" title="盒模型"></a>盒模型</h2><h3 id="W3C标准盒模型"><a href="#W3C标准盒模型" class="headerlink" title="W3C标准盒模型"></a>W3C标准盒模型</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">外盒尺寸计算(元素空间尺寸)</div><div class="line">element 空间高度 = 内容高度 + 内距 + 边框 + 外距</div><div class="line">element 空间宽度 = 内容宽度 + 内距 + 边框 + 外距</div><div class="line">内盒尺寸计算(元素大小)</div><div class="line">element 高度 = 内容高度 + 内距 + 边框 （height为内容高度）</div><div class="line">element 宽度 = 内容宽度 + 内距 + 边框 （width为内容宽度）</div></pre></td></tr></table></figure>
<h3 id="IE传统盒模型-IE6以下"><a href="#IE传统盒模型-IE6以下" class="headerlink" title="IE传统盒模型(IE6以下)"></a>IE传统盒模型(IE6以下)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">外盒尺寸计算(元素空间尺寸)</div><div class="line">element 空间高度 = 内容高度 + 外距（height包含了元素内容高度、边框、内距）</div><div class="line">element 空间宽度 = 内容宽度 + 外距（height包含了元素内容高度、边框、内距）</div><div class="line">内盒尺寸计算(元素大小)</div><div class="line">element 高度 = 内容高度（height包含了元素内容高度、边框、内距）</div><div class="line">element 宽度 = 内容宽度（width包含了元素内容宽度、边框、内距）</div></pre></td></tr></table></figure>
<p>边框和内距都包含在宽度或高度内！！！</p>
<h2 id="box-sizing属性"><a href="#box-sizing属性" class="headerlink" title="box-sizing属性"></a>box-sizing属性</h2><p>可选的属性值如下：</p>
<blockquote>
<p><strong>content-box(默认):</strong> 维持W3C的标准盒模型<br><strong>border-box:</strong> 维持IE的传统盒模型<br><strong>padding-box(Firefox浏览器):</strong> 指定元素的宽度或高度包含内容的宽度或高度和内距<br><strong>inherit:</strong> 从父元素继承</p>
</blockquote>
<p>说明如下：</p>
<ul>
<li>定义盒模型的尺寸解析方式，主要目的是控制元素的总宽度  </li>
</ul>
<h2 id="outline属性"><a href="#outline属性" class="headerlink" title="outline属性"></a>outline属性</h2><ul>
<li><p>外轮廓outline的效果和边框border的效果极其相似，不同之处在于outline不占用网页布局空间，不一定是矩形，属于一种动态样式，可以向内扩展。</p>
</li>
<li><p>将outline属性设置在:focus上，可以实现在元素获取到焦点或者被激活时呈现边框的效果。</p>
</li>
<li><p>为了给元素添加边框效果又不影响页面布局，可以使用outline属性。</p>
</li>
</ul>
<h2 id="position属性"><a href="#position属性" class="headerlink" title="position属性"></a>position属性</h2><p>可选的属性值如下：</p>
<blockquote>
<p><strong>static(默认):</strong> 元素不会被特殊的定位，top, right, bottom, left 和 z-index 属性无效。<br><strong>relative:</strong> 相对定位，相对于其在普通流中的正常位置进行定位，元素仍保持其未定位前的形状，它原本所占的空间仍保留。<br><strong>absolute:</strong> 绝对定位，不为元素预留空间。元素相对于最近的非static定位的祖先元素来定位。<br><strong>fixed:</strong> 固定定位，不为元素预留空间。元素会相对于视窗来来定位，当出现滚动条时，对象不会随着滚动。<br><strong>inherit:</strong> 从父元素继承。</p>
</blockquote>
<p>说明如下：</p>
<p>position: sticky，类似relative和fixed的合体，当目标区域在屏幕中可见时，它的行为就像relative; 当页面滚动超出目标区域时，它的行为就像fixed，固定在目标位置。目前支持该属性的浏览器比较少。</p>
<h2 id="top、right、bottom、left-属性"><a href="#top、right、bottom、left-属性" class="headerlink" title="top、right、bottom、left 属性"></a>top、right、bottom、left 属性</h2><p>top、right、bottom、left 分别定义了定位元素上、右、下、左外边距边界与其包含块右边界之间的偏移。可选的取值如下：</p>
<blockquote>
<p><strong>auto(默认):</strong> 通过浏览器计算的位置<br><strong>%:</strong> 设置以包含元素的百分比计的位置，可使用负值<br><strong>length:</strong> 使用 px、cm 等单位设置元素的位置，可使用负值<br><strong>inherit:</strong> 规定应该从父元素继承属性的值</p>
</blockquote>
<p>说明如下：</p>
<p>对于 static 元素，为 auto。对于相对定义元素，如果 top 和 bottom 都是 auto，其计算值则都是 0；如果其中之一为 auto，则取另一个值的相反数；如果二者都不是 auto，bottom 将取 top 值的相反数；当 left 和 right​ ​​​​​同时指定时，如果容器是从左到右时，left的值会被优先设定，如果容器是从右到左时，right的值会被优先设定。</p>
<h2 id="overflow-属性"><a href="#overflow-属性" class="headerlink" title="overflow 属性"></a>overflow 属性</h2><p>可选的属性值如下：</p>
<blockquote>
<p><strong>visible(默认):</strong> 内容不会被修剪，会呈现在元素框之外<br><strong>hidden:</strong> 内容会被修剪，并且其余内容是不可见的<br><strong>scroll:</strong> 内容会被修剪，但是浏览器会显示滚动条以便查看其余的内容<br><strong>auto:</strong> 如果内容被修剪，则浏览器会显示滚动条以便查看其余的内容<br><strong>inherit:</strong> 从父元素继承</p>
</blockquote>
<p>说明如下：</p>
<p>如果值为 scroll，不论是否需要，用户代理都会提供一种滚动机制。因此，有可能即使元素框中可以放下所有内容也会出现滚动条。</p>
<h2 id="clip-属性"><a href="#clip-属性" class="headerlink" title="clip 属性"></a>clip 属性</h2><p>用于裁剪绝对定位元素，可选的属性值如下：</p>
<blockquote>
<p><strong>auto(默认):</strong> 不应用任何剪裁<br><strong>shape:</strong> 设置元素的形状，唯一合法的形状值是：rect(top, right, bottom, left)<br><strong>inherit:</strong> 从父元素继承</p>
</blockquote>
<h2 id="z-index-属性"><a href="#z-index-属性" class="headerlink" title="z-index 属性"></a>z-index 属性</h2><p>设置元素的堆叠顺序，仅能在定位元素上奏效，即 position 为 relative 或 absolute 的元素上。</p>
<h2 id="vertical-align-属性"><a href="#vertical-align-属性" class="headerlink" title="vertical-align 属性"></a>vertical-align 属性</h2><p>可选的属性值如下：</p>
<blockquote>
<p><strong>baseline(默认):</strong> 元素放置在父元素的基线上<br><strong>sub:</strong> 垂直对齐文本的下标<br><strong>super:</strong> 垂直对齐文本的上标<br><strong>top:</strong> 把元素的顶端与行中最高元素的顶端对齐<br><strong>text-top:</strong> 把元素的顶端与父元素字体的顶端对齐<br><strong>middle:</strong> 把此元素放置在父元素的中部<br><strong>bottom:</strong> 把元素的底端与行中最低的元素的底端对齐<br><strong>text-bottom:</strong> 把元素的底端与父元素字体的底端对齐<br><strong>lenght:</strong> 用长度值指定由基线算起的偏移量，允许使用负值<br><strong>%:</strong> 使用 “line-height” 属性的百分比值来排列此元素，允许使用负值<br><strong>inherit:</strong> 从父元素继承</p>
</blockquote>
<p>说明如下：</p>
<p>vertical-align 影响 inline-level 元素，这些元素的 display 属性为 inline、inline-block、inline-table，基本的inline元素都是标签裹着文字。</p>
<p>inline 的元素在一行中一个挨着一个，当这些元素超出了他们的所在行，一个新行便会建立在它下方。这里的每一行就叫做line box。每一行不同尺寸的元素意味着 line box 不同的高度。在这些 line boxes 里面 vertical-align 属性负责摆放单独的元素。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/09/21/scattered-knowledge/" itemprop="url">
                  零散知识
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-21T17:53:42+08:00" content="2016-09-21">
              2016-09-21
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/Other/" itemprop="url" rel="index">
                    <span itemprop="name">Other</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="window-parent和window-opener区别"><a href="#window-parent和window-opener区别" class="headerlink" title="window.parent和window.opener区别"></a>window.parent和window.opener区别</h2><ul>
<li>window.parent能获取一个框架的父窗口或父框架。顶层窗口的parent引用的是它本身。</li>
<li>window.opener引用的是window.open打开的页面的父页面。</li>
</ul>
<h2 id="解决不支持html5标签的办法"><a href="#解决不支持html5标签的办法" class="headerlink" title="解决不支持html5标签的办法"></a>解决不支持html5标签的办法</h2><p>方式一：自己创建标签节点<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">    document.createElement(e[i]);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure></p>
<p>方式二：使用Google的html5shiv包（推荐）<br><code>&lt;script src=&quot;http://html5shiv.googlecode.com/svn/trunk/html5.js&quot;&gt;&lt;/script&gt;</code></p>
<p><strong>不管使用以上哪种方法,都要初始化新标签的CSS</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">article,aside,dialog,footer,header,section,footer,nav,figure,menu&#123;</div><div class="line">    display: block;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>方式三：防弹衣技术<br>Bulletproof技术，防弹衣技术，建议在所有新的HTML5块级元素中增加一个内部的div元素，然后包含一个CSS class，用这个元素来替代HTML元素。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;section&gt;</div><div class="line">　　&lt;div class=&quot;section&quot;&gt;</div><div class="line">　　&lt;!-- content --&gt;</div><div class="line">　　&lt;/div&gt;</div><div class="line">&lt;/section&gt;</div><div class="line"></div><div class="line">.section &#123;</div><div class="line">   　　color: blue;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<h2 id="outerHTML、innerText、innerHTML"><a href="#outerHTML、innerText、innerHTML" class="headerlink" title="outerHTML、innerText、innerHTML"></a>outerHTML、innerText、innerHTML</h2><img src="/2016/09/21/scattered-knowledge/innerHTML.gif" title="一张图了解outerHTML和innerText、innerHTML">
<h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><p>cmd中输入<code>echo %PATH%</code> 可查看path环境变量</p>
<h2 id="Chrome浏览器用户名、密码回填问题"><a href="#Chrome浏览器用户名、密码回填问题" class="headerlink" title="Chrome浏览器用户名、密码回填问题"></a>Chrome浏览器用户名、密码回填问题</h2><p>前几天发现一个奇怪的问题，使用Chrome浏览器在登录输入用户名、密码后，点击了保存用户名密码，在其它页面发生了用户名、密码的回填。</p>
<img src="/2016/09/21/scattered-knowledge/login1.png" title="登录输入">
<img src="/2016/09/21/scattered-knowledge/save.png" title="点击保存密码">
<img src="/2016/09/21/scattered-knowledge/card.png" title="其它页面表单">
<p>解决方案：在使用到Input的地方，都添加了autoComplete属性值为off和name属性，但是不同的name属性值，有的可能不会回填有的可能就会回填，我有点怀疑人生了。</p>
<img src="/2016/09/21/scattered-knowledge/card1.png" title="回填登录信息">
<img src="/2016/09/21/scattered-knowledge/card2.png" title="没有回填登录信息">
<p><strong>而且对于没有回填用户信息的情况，在点击密码框的时候，还是会有用户密码信息的提示，这个还没有找到解决方案。</strong></p>
<img src="/2016/09/21/scattered-knowledge/card3.png" title="提示用户密码">
<h2 id="端口占用"><a href="#端口占用" class="headerlink" title="端口占用"></a>端口占用</h2><h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><p>netstat -aon | findstr 8088 # 查看指定端口被哪个进程占用，会返回一个进程号<br>tasklist | findstr 6808 # 查看指定进程号是哪个程序的<br>taskkill -F -IM javaw.exe # 杀死应用程序</p>
<h3 id="mac"><a href="#mac" class="headerlink" title="mac"></a>mac</h3><p>sudo lsof -i :4000<br>sudo kill -9 [PID]</p>
<h2 id="eclipse分配内存"><a href="#eclipse分配内存" class="headerlink" title="eclipse分配内存"></a>eclipse分配内存</h2><p>右键项目 -&gt; Run As -&gt; -Run Configurations -&gt; Arguments， 添加下面的信息到VM arguments中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-Xms256m</div><div class="line">-Xmx512m -XX:MaxNewSize=256m -XX:MaxPermSize=512m</div></pre></td></tr></table></figure></p>
<h2 id="Xshell指令更新环境"><a href="#Xshell指令更新环境" class="headerlink" title="Xshell指令更新环境"></a>Xshell指令更新环境</h2><p>停 tomcat 重新启动<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">ps -ef|grep java            # 查进程号，12997</div><div class="line">kill -9 12997               # 杀死进程</div><div class="line">cd /usr/local/tomcat6/bin/  # 进入到目录</div><div class="line">./catalina.sh start         # 启动</div><div class="line">cd ..                       </div><div class="line">cd logs</div><div class="line">tail -f catalina.out        # 打日志</div></pre></td></tr></table></figure></p>
<h2 id="Chrome插件生成crx文件"><a href="#Chrome插件生成crx文件" class="headerlink" title="Chrome插件生成crx文件"></a>Chrome插件生成crx文件</h2><p>扩展程序-&gt;开发者模式-&gt;打包扩展程序-&gt;根据扩展程序ID，如hgmloofddffdnphfgcellkdfbfbjeloo，在C:\Users\Administrator\AppData\Local\Google\Chrome\User Data\Default\Extensions\路径下找到指定ID(hgmloofddffdnphfgcellkdfbfbjeloo)文件，双击进入，选择文件夹-&gt;打包扩展程序，即可生成crx文件。</p>
<h2 id="Thunk函数的含义"><a href="#Thunk函数的含义" class="headerlink" title="Thunk函数的含义"></a>Thunk函数的含义</h2><p>编译器的”传名调用”实现，往往是将参数放到一个临时函数之中，再将这个临时函数传入函数体。这个临时函数就叫做Thunk函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">function f(m)&#123;</div><div class="line">  return m * 2;</div><div class="line">&#125;</div><div class="line">f(x + 5);</div><div class="line"></div><div class="line">// 等同于</div><div class="line">var thunk = function () &#123;</div><div class="line">  return x + 5;</div><div class="line">&#125;;</div><div class="line">function f(thunk)&#123;</div><div class="line">  return thunk() * 2;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在JavaScript语言中，Thunk函数替换的不是表达式，而是多参数函数，将其替换成单参数的版本，且只接受回调函数作为参数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// 正常版本的readFile（多参数版本）</div><div class="line">fs.readFile(fileName, callback);</div><div class="line"></div><div class="line">// Thunk版本的readFile（单参数版本）</div><div class="line">var Thunk = function (fileName)&#123;</div><div class="line">  return function (callback)&#123;</div><div class="line">    return fs.readFile(fileName, callback);</div><div class="line">  &#125;;</div><div class="line">&#125;;</div><div class="line">var readFileThunk = Thunk(fileName);</div><div class="line">readFileThunk(callback);</div></pre></td></tr></table></figure>
<h2 id="数据库表回滚"><a href="#数据库表回滚" class="headerlink" title="数据库表回滚"></a>数据库表回滚</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># 表sy_org_user1回滚到2015-01-09 15:00:00时间</div><div class="line">alter table sy_org_user1 enable row movement;</div><div class="line">flashback table sy_org_user1 to timestamp to_timestamp(&apos;2015-01-09 15:00:00&apos;,&apos;yyyy-mm-dd hh24:mi:ss&apos;);</div></pre></td></tr></table></figure>
<h2 id="Oracle数据库导入导出"><a href="#Oracle数据库导入导出" class="headerlink" title="Oracle数据库导入导出"></a>Oracle数据库导入导出</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># 导出库</div><div class="line">exp DEV_BASE/DEV_BASE@pcmdb_192.168.100.30 file=E:\DEV_BASE.dmp owner=DEV_BASE</div><div class="line"># 如果以前导入过，删除用户再重建</div><div class="line">drop user DEV_BASE cascade;</div><div class="line">create user DEV_BASE identified by DEV_BASE;</div><div class="line">grant resource, connect, dba to DEV_BASE;</div><div class="line">alter user DEV_BASE quota unlimited on PCMDB;</div><div class="line"># 导入库</div><div class="line">imp system/sys1234@orcl fromuser=DEV_BASE touser=DEV_BASE file=E:\DEV_BASE.dmp</div></pre></td></tr></table></figure>
<h2 id="响应式编程"><a href="#响应式编程" class="headerlink" title="响应式编程"></a>响应式编程</h2><p>响应式编程是一种面向数据流和变化传播的编程范式，这意味着可以在编程语言中很方便地表达静态或动态的数据流，而相关的计算模型会自动将变化的值通过数据流进行传播。响应式编程最初是为了简化交互式用户界面的创建和实时系统动画的绘制而提出来的一种方法，但它本质上是一种通用的编程范式。在MVC软件架构中，响应式编程允许将相关模型的变化自动反映到视图上，反之亦然。</p>
<h2 id="检测浏览器版本"><a href="#检测浏览器版本" class="headerlink" title="检测浏览器版本"></a>检测浏览器版本</h2><p>最近做的项目对浏览器的类型及版本有要求，同事写了检测浏览器版本的代码如下，我在此处进行记录，供以后参考。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--在工程入口html文件的body标签中添加如下script内容--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">id</span>=<span class="string">"body"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"react-content"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="xml"></span></div><div class="line">      function cheackBowser() &#123;</div><div class="line">        var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串</div><div class="line">        var version = navigator.appVersion; // 浏览器版本信息</div><div class="line">        var isOpera = userAgent.indexOf("Opera") &gt; -1; //判断是否Opera浏览器</div><div class="line">        var isChrome = userAgent.indexOf("Chrome") &gt; -1; //判断是否Chrome浏览器</div><div class="line">        var isIE = userAgent.indexOf("compatible") &gt; -1 &amp;&amp; userAgent.indexOf("MSIE") &gt; -1 &amp;&amp; !isOpera; //判断是否IE浏览器</div><div class="line">        var isFF = userAgent.indexOf("Firefox") &gt; -1; //判断是否Firefox浏览器</div><div class="line">        var isSafari = userAgent.indexOf("Safari") &gt; -1; //判断是否Safari浏览器</div><div class="line"></div><div class="line">        //如果是 IE 火狐 opera，提示下载qq浏览器</div><div class="line">        if(isIE || isFF || isOpera) &#123;</div><div class="line">          //主页面不显示只显示弹出框，弹出弹框提示下载qq浏览器</div><div class="line">          if(confirm("您使用的浏览器存在兼容问题，为了您更好的用户体验，建议您点击确定下载QQ浏览器")) &#123;</div><div class="line">              document.getElementById("react-content").style.display = "none";</div><div class="line">              window.open("http://browser.qq.com/?adtag=SEM1", "_self");</div><div class="line">          &#125; else &#123;</div><div class="line">            //点击取消关闭此页面</div><div class="line">            window.close();</div><div class="line">            //如果关闭此页面被阻止则把页面清空</div><div class="line">            if(window)&#123;</div><div class="line">               window.location.href="about:blank";</div><div class="line">            &#125;</div><div class="line">          &#125;</div><div class="line">        &#125; else if(isChrome)&#123;</div><div class="line">            var detailVersion = Number(VersionFilter(version)[0].substring(7,9));</div><div class="line">            if(detailVersion <span class="tag">&lt; <span class="attr">45</span>) &#123;</span></div><div class="line">              <span class="attr">document.getElementById</span>("<span class="attr">react-content</span>")<span class="attr">.style.display</span> = <span class="string">"none"</span>;</div><div class="line">              <span class="attr">if</span>(<span class="attr">confirm</span>("您使用的浏览器版本太低，为了您更好的用户体验，建议您点击确定下载<span class="attr">QQ</span>浏览器")) &#123;</div><div class="line">                <span class="attr">window.open</span>("<span class="attr">https:</span>//<span class="attr">dldir1.qq.com</span>/<span class="attr">invc</span>/<span class="attr">tt</span>/<span class="attr">QQBrowser_Setup_SEM1.exe</span>","<span class="attr">_self</span>");</div><div class="line">              &#125;</div><div class="line">            &#125; <span class="attr">else</span> &#123;</div><div class="line">              //谷歌浏览器,版本符合要求</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">      // 获取详细的<span class="attr">chrome</span>版本</div><div class="line">      <span class="attr">function</span> <span class="attr">VersionFilter</span> (<span class="attr">value</span>) &#123;</div><div class="line">        <span class="attr">var</span> <span class="attr">reg</span> = <span class="string">/Chrome\/\d&#123;2&#125;\.\d+\.\d+/</span></div><div class="line">         <span class="attr">return</span> <span class="attr">reg.exec</span>(<span class="attr">value</span>)</div><div class="line">      &#125;</div><div class="line">      <span class="attr">cheackBowser</span>()</div><div class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="打版本号"><a href="#打版本号" class="headerlink" title="打版本号"></a>打版本号</h2><p>在做项目时，测试环境只要更新，最好打个版本号(tag)，这样如果这次测试的结果比较稳定，要向线上更新，直接更新指定tag的代码到线上就行了，开发人员还是正常开发提交代码。</p>
<h2 id="元编程"><a href="#元编程" class="headerlink" title="元编程"></a>元编程</h2><p>简单的理解可以说成是“关于编程的编程”，或者说“与编程相关的编程”，如程序甲可以输出 A ~ Z，而程序乙可以生成程序甲，那么编写程序乙的活动就可以算作元编程。元编程更狭义的意思应该是指“编写能改变语言语法特性或者运行时特性的程序”，一种语言本来做不到的事情，通过编程来修改它，使得它可以做到了，这就是元编程。</p>
<h2 id="robots-txt"><a href="#robots-txt" class="headerlink" title="robots.txt"></a>robots.txt</h2><p><a href="https://baike.baidu.com/item/robots%E5%8D%8F%E8%AE%AE/2483797?fromtitle=robots.txt&amp;fromid=9518761&amp;fr=aladdin" target="_blank" rel="external">【百度百科】</a>robots协议也叫robots.txt（统一小写）是一种存放于网站根目录下的ASCII编码的文本文件，它通常告诉网络搜索引擎的漫游器（又称网络蜘蛛），此网站中的哪些内容是不应被搜索引擎的漫游器获取的，哪些是可以被漫游器获取的。因为一些系统中的URL是大小写敏感的，所以robots.txt的文件名应统一为小写。robots.txt应放置于网站的根目录下。如果想单独定义搜索引擎的漫游器访问子目录时的行为，那么可以将自定的设置合并到根目录下的robots.txt，或者使用robots元数据（Metadata，又称元数据）。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/15/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/">17</a><a class="extend next" rel="next" href="/page/17/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
       
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">小朱</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  



  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;

            $('.popup').detach().appendTo('.container');
            //$('.popup').detach().appendTo('.header-inner');

            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
